{"version":3,"sources":["node_modules/crtrdg-gameloop/node_modules/eventemitter2/lib/eventemitter2.js","../rbd/pnpm-volume/8804483f-7435-434d-ab8d-d8d811696a6a/node_modules/parcel-bundler/node_modules/process/browser.js","node_modules/crtrdg-gameloop/node_modules/performance-now/lib/performance-now.js","node_modules/crtrdg-gameloop/node_modules/inherits/inherits_browser.js","src/performance-now.coffee","node_modules/crtrdg-gameloop/node_modules/raf/index.js","node_modules/crtrdg-gameloop/node_modules/gameloop/index.js","node_modules/crtrdg-gameloop/node_modules/gameloop-canvas/index.js","node_modules/crtrdg-gameloop/node_modules/isarray/index.js","node_modules/crtrdg-gameloop/index.js","../rbd/pnpm-volume/8804483f-7435-434d-ab8d-d8d811696a6a/node_modules/parcel-bundler/node_modules/events/events.js","node_modules/inherits/inherits_browser.js","node_modules/crtrdg-arrows/index.js","level.txt","tiles_list_v1.3.txt","lib/sprite.js","node_modules/seedrandom/lib/alea.js","node_modules/seedrandom/lib/xor128.js","node_modules/seedrandom/lib/xorwow.js","node_modules/seedrandom/lib/xorshift7.js","node_modules/seedrandom/lib/xor4096.js","node_modules/seedrandom/lib/tychei.js","node_modules/seedrandom/seedrandom.js","node_modules/seedrandom/index.js","lib/level.js","lib/ui.js","entities/Player.js","index.js","../rbd/pnpm-volume/8804483f-7435-434d-ab8d-d8d811696a6a/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["process","module","exports","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","setTimeout","e","clearTimeout","runTimeout","fun","call","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","nextTick","args","Array","arguments","i","push","Item","array","prototype","apply","title","env","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","R","Reflect","ReflectApply","target","receiver","Function","ReflectOwnKeys","ownKeys","Object","getOwnPropertySymbols","getOwnPropertyNames","ProcessEmitWarning","warning","console","warn","NumberIsNaN","Number","isNaN","value","EventEmitter","init","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","defineProperty","enumerable","get","set","arg","RangeError","getPrototypeOf","create","setMaxListeners","n","_getMaxListeners","that","getMaxListeners","type","doError","events","error","er","err","message","context","handler","arrayClone","_addListener","prepend","m","existing","newListener","unshift","warned","w","String","emitter","count","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","list","position","originalListener","shift","spliceOne","keys","key","_listeners","unwrap","evlistener","unwrapListeners","rawListeners","listenerCount","eventNames","arr","copy","index","pop","ret","tileset","Image","src","sprites","tilesList","split","map","line","sx","sy","swidth","sheight","frames","parseInt","reduce","prev","rest","drawSprite","ctx","x","y","flipped","sprite","save","translate","document","getElementById","width","scale","drawImage","restore","animateSprite","delay","frame","Math","round","Date","now","TILE_SIZE","drawLevel","rng","levelMatrix","forEach","tile","getLevelTile","drawFloorTile","drawWallInnerRightCorner","drawWallInnerLeftCorner","drawWallInnerLeftTopCorner","drawWallInnerRightTopCorner","drawWallTopTile","drawWallBottomTile","drawWallLeftTile","drawWallRightTile","drawWallCornerBottomRightTile","drawWallCornerTopRightTile","drawWallCornerBottomLeftTile","drawWallCornerTopLeftTile","random","brokenTilesFrequency","id","ceil","level","drawUI","fillStyle","fillText","Player","speed","direction","isMoving","dt","diagonalModifier","horizontal","vertical","game","arrows","Arrows","canvas","height","player","entities","drawEntities","isDown","move","start","it","draw","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","stack","overlay","createErrorOverlay","body","appendChild","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","isArray","deps","cached","cache","some","cb"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA,IAAIC,CAAC,GAAG,OAAOC,OAAP,KAAmB,QAAnB,GAA8BA,OAA9B,GAAwC,IAAhD;AACA,IAAIC,YAAY,GAAGF,CAAC,IAAI,OAAOA,CAAC,CAACvB,KAAT,KAAmB,UAAxB,GACfuB,CAAC,CAACvB,KADa,GAEf,SAASyB,YAAT,CAAsBC,MAAtB,EAA8BC,QAA9B,EAAwCnC,IAAxC,EAA8C;AAC9C,SAAOoC,QAAQ,CAAC7B,SAAT,CAAmBC,KAAnB,CAAyBvB,IAAzB,CAA8BiD,MAA9B,EAAsCC,QAAtC,EAAgD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xB,EAAgC4H,KAAK,EAArC,EACEhB,IAAI,CAACgB,KAAD,CAAJ,GAAchB,IAAI,CAACgB,KAAK,GAAG,CAAT,CAAlB;;AACFhB,EAAAA,IAAI,CAACiB,GAAL;AACD;;AAED,SAASP,eAAT,CAAyBI,GAAzB,EAA8B;AAC5B,MAAII,GAAG,GAAG,IAAItH,KAAJ,CAAUkH,GAAG,CAAC1H,MAAd,CAAV;;AACA,OAAK,IAAIU,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoH,GAAG,CAAC9H,MAAxB,EAAgC,EAAEU,CAAlC,EAAqC;AACnCoH,IAAAA,GAAG,CAACpH,CAAD,CAAH,GAASgH,GAAG,CAAChH,CAAD,CAAH,CAAOuD,QAAP,IAAmByD,GAAG,CAAChH,CAAD,CAA/B;AACD;;AACD,SAAOoH,GAAP;AACD;;AC7bD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFAlJ,MAAM,CAACC,OAAP;;ACAAD,MAAM,CAACC,OAAP;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMkJ,OAAO,GAAG,IAAIC,KAAJ,CAAU,GAAV,EAAe,GAAf,CAAhB;AAEAD,OAAO,CAACE,GAAR,GACE,8GA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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC5DA;;AACA;;AACA;;;;AAEA,IAAMqB,SAAS,GAAG,EAAlB;eAEeC;;;AAEf,SAASA,SAAT,CAAmBrB,GAAnB,EAAwB;AACtB,MAAMsB,GAAG,GAAG,yBAAW,MAAX,CAAZ;AACAC,EAAAA,WAAW,CAACC,OAAZ,CAAoB,UAACnC,IAAD,EAAOa,CAAP;AAAA,WAClBb,IAAI,CAACmC,OAAL,CAAa,UAACC,IAAD,EAAOxB,CAAP,EAAa;AACxB,UAAIwB,IAAI,KAAK,GAAb,EAAkB;AAChB,eAAO,qBAAWzB,GAAX,EAAgB,kBAAhB,EAAoCC,CAAC,GAAGmB,SAAxC,EAAmD,CAAClB,CAAC,GAAG,CAAL,IAAUkB,SAA7D,CAAP;AACD;;AACD,UAAIK,IAAI,KAAK,GAAb,EAAkB;AAChB,eAAO,qBAAWzB,GAAX,EAAgB,mBAAhB,EAAqCC,CAAC,GAAGmB,SAAzC,EAAoD,CAAClB,CAAC,GAAG,CAAL,IAAUkB,SAA9D,CAAP;AACD;;AACD,UAAIK,IAAI,KAAK,GAAT,IAAgBC,YAAY,CAACzB,CAAC,GAAG,CAAL,EAAQC,CAAR,CAAZ,KAA2B,GAA/C,EAAoD;AAClD,eAAO,qBAAWF,GAAX,EAAgB,mBAAhB,EAAqCC,CAAC,GAAGmB,SAAzC,EAAoD,CAAClB,CAAC,GAAG,CAAL,IAAUkB,SAA9D,CAAP;AACA,eAAO,qBAAWpB,GAAX,EAAgB,iBAAhB,EAAmCC,CAAC,GAAGmB,SAAvC,EAAkD,CAAClB,CAAC,GAAG,CAAL,IAAUkB,SAA5D,CAAP;AACD;;AACD,UAAIK,IAAI,KAAK,GAAb,EAAkB;AAChBE,QAAAA,aAAa,CAAC3B,GAAD,EAAMC,CAAN,EAASC,CAAT,EAAYoB,GAAG,EAAf,CAAb;AACD,OAFD,MAEO,IAAIG,IAAI,KAAK,GAAb,EAAkB;AACvB,YACEC,YAAY,CAACzB,CAAC,GAAG,CAAL,EAAQC,CAAC,GAAG,CAAZ,CAAZ,KAA+B,GAA/B,IACAwB,YAAY,CAACzB,CAAC,GAAG,CAAL,EAAQC,CAAR,CAAZ,KAA2B,GAD3B,IAEAwB,YAAY,CAACzB,CAAD,EAAIC,CAAC,GAAG,CAAR,CAAZ,KAA2B,GAH7B,EAKE,OAAO0B,wBAAwB,CAAC5B,GAAD,EAAMC,CAAN,EAASC,CAAT,CAA/B;AAEF,YACEwB,YAAY,CAACzB,CAAC,GAAG,CAAL,EAAQC,CAAC,GAAG,CAAZ,CAAZ,KAA+B,GAA/B,IACAwB,YAAY,CAACzB,CAAC,GAAG,CAAL,EAAQC,CAAR,CAAZ,KAA2B,GAD3B,IAEAwB,YAAY,CAACzB,CAAD,EAAIC,CAAC,GAAG,CAAR,CAAZ,KAA2B,GAH7B,EAKE,OAAO2B,uBAAuB,CAAC7B,GAAD,EAAMC,CAAN,EAASC,CAAT,CAA9B;AAEF,YACEwB,YAAY,CAACzB,CAAC,GAAG,CAAL,EAAQC,CAAC,GAAG,CAAZ,CAAZ,KAA+B,GAA/B,IACAwB,YAAY,CAACzB,CAAC,GAAG,CAAL,EAAQC,CAAR,CAAZ,KAA2B,GAD3B,IAEAwB,YAAY,CAACzB,CAAD,EAAIC,CAAC,GAAG,CAAR,CAAZ,KAA2B,GAH7B,EAKE,OAAO4B,0BAA0B,CAAC9B,GAAD,EAAMC,CAAN,EAASC,CAAT,CAAjC;AAEM,YACNwB,YAAY,CAACzB,CAAC,GAAG,CAAL,EAAQC,CAAC,GAAG,CAAZ,CAAZ,KAA+B,GAA/B,IACAwB,YAAY,CAACzB,CAAC,GAAG,CAAL,EAAQC,CAAR,CAAZ,KAA2B,GAD3B,IAEAwB,YAAY,CAACzB,CAAD,EAAIC,CAAC,GAAG,CAAR,CAAZ,KAA2B,GAHrB,EAKN,OAAO6B,2BAA2B,CAAC/B,GAAD,EAAMC,CAAN,EAASC,CAAT,CAAlC;AAEF,YAAIwB,YAAY,CAACzB,CAAD,EAAIC,CAAC,GAAG,CAAR,CAAZ,KAA2B,GAA/B,EAAoC,OAAO8B,eAAe,CAAChC,GAAD,EAAMC,CAAN,EAASC,CAAT,CAAtB;AACpC,YAAIwB,YAAY,CAACzB,CAAD,EAAIC,CAAC,GAAG,CAAR,CAAZ,KAA2B,GAA/B,EAAoC,OAAO+B,kBAAkB,CAACjC,GAAD,EAAMC,CAAN,EAASC,CAAT,CAAzB;AACpC,YAAIwB,YAAY,CAACzB,CAAC,GAAG,CAAL,EAAQC,CAAR,CAAZ,KAA2B,GAA/B,EAAoC,OAAOgC,gBAAgB,CAAClC,GAAD,EAAMC,CAAN,EAASC,CAAT,CAAvB;AACpC,YAAIwB,YAAY,CAACzB,CAAC,GAAG,CAAL,EAAQC,CAAR,CAAZ,KAA2B,GAA/B,EAAoC,OAAOiC,iBAAiB,CAACnC,GAAD,EAAMC,CAAN,EAASC,CAAT,CAAxB;AACpC,YAAIwB,YAAY,CAACzB,CAAC,GAAG,CAAL,EAAQC,CAAC,GAAG,CAAZ,CAAZ,KAA+B,GAAnC,EACE,OAAOkC,6BAA6B,CAACpC,GAAD,EAAMC,CAAN,EAASC,CAAT,CAApC;AACF,YAAIwB,YAAY,CAACzB,CAAC,GAAG,CAAL,EAAQC,CAAC,GAAG,CAAZ,CAAZ,KAA+B,GAAnC,EACE,OAAOmC,0BAA0B,CAACrC,GAAD,EAAMC,CAAN,EAASC,CAAT,CAAjC;AACF,YAAIwB,YAAY,CAACzB,CAAC,GAAG,CAAL,EAAQC,CAAC,GAAG,CAAZ,CAAZ,KAA+B,GAAnC,EACE,OAAOoC,4BAA4B,CAACtC,GAAD,EAAMC,CAAN,EAASC,CAAT,CAAnC;AACF,YAAIwB,YAAY,CAACzB,CAAC,GAAG,CAAL,EAAQC,CAAC,GAAG,CAAZ,CAAZ,KAA+B,GAAnC,EACE,OAAOqC,yBAAyB,CAACvC,GAAD,EAAMC,CAAN,EAASC,CAAT,CAAhC;AACH;AACF,KAvDD,CADkB;AAAA,GAApB;AA0DD;;AAED,SAAS0B,wBAAT,CAAkC5B,GAAlC,EAAuCC,CAAvC,EAA0CC,CAA1C,EAA6C;AAC3C,uBAAWF,GAAX,EAAgB,SAAhB,EAA2BC,CAAC,GAAGmB,SAA/B,EAA0ClB,CAAC,GAAGkB,SAA9C;AACA,uBAAWpB,GAAX,EAAgB,sBAAhB,EAAwCC,CAAC,GAAGmB,SAA5C,EAAuDlB,CAAC,GAAGkB,SAA3D;AACD;;AAED,SAASS,uBAAT,CAAiC7B,GAAjC,EAAsCC,CAAtC,EAAyCC,CAAzC,EAA4C;AAC1C,uBAAWF,GAAX,EAAgB,SAAhB,EAA2BC,CAAC,GAAGmB,SAA/B,EAA0ClB,CAAC,GAAGkB,SAA9C;AACA,uBAAWpB,GAAX,EAAgB,uBAAhB,EAAyCC,CAAC,GAAGmB,SAA7C,EAAwDlB,CAAC,GAAGkB,SAA5D;AACD;;AAED,SAASU,0BAAT,CAAoC9B,GAApC,EAAyCC,CAAzC,EAA4CC,CAA5C,EAA+C;AAC7C,uBAAWF,GAAX,EAAgB,SAAhB,EAA2BC,CAAC,GAAGmB,SAA/B,EAA0ClB,CAAC,GAAGkB,SAA9C;AACA,uBAAWpB,GAAX,EAAgB,qBAAhB,EAAuCC,CAAC,GAAGmB,SAA3C,EAAsDlB,CAAC,GAAGkB,SAA1D;AACA,uBAAWpB,GAAX,EAAgB,qBAAhB,EAAuCC,CAAC,GAAGmB,SAA3C,EAAsD,CAAClB,CAAC,GAAG,CAAL,IAAUkB,SAAhE;AACD;;AAED,SAASW,2BAAT,CAAqC/B,GAArC,EAA0CC,CAA1C,EAA6CC,CAA7C,EAAgD;AAC9C,uBAAWF,GAAX,EAAgB,SAAhB,EAA2BC,CAAC,GAAGmB,SAA/B,EAA0ClB,CAAC,GAAGkB,SAA9C;AACA,uBAAWpB,GAAX,EAAgB,oBAAhB,EAAsCC,CAAC,GAAGmB,SAA1C,EAAqDlB,CAAC,GAAGkB,SAAzD;AACA,uBAAWpB,GAAX,EAAgB,oBAAhB,EAAsCC,CAAC,GAAGmB,SAA1C,EAAqD,CAAClB,CAAC,GAAG,CAAL,IAAUkB,SAA/D;AACD;;AAED,SAASO,aAAT,CAAuB3B,GAAvB,EAA4BC,CAA5B,EAA+BC,CAA/B,EAAkCsC,MAAlC,EAA0C;AACxC,MAAMC,oBAAoB,GAAG,GAA7B;AACA,MAAMC,EAAE,GAAGF,MAAM,GAAG,IAAIC,oBAAb,GAAoC,CAApC,GAAwCzB,IAAI,CAAC2B,IAAL,CAAU,CAACH,MAAM,GAAG,CAAT,GAAaC,oBAAd,IAAsCA,oBAAtC,GAA6D,CAAvE,CAAnD;AAEA,uBAAWzC,GAAX,EAAgB,WAAW0C,EAA3B,EAA+BzC,CAAC,GAAGmB,SAAnC,EAA8ClB,CAAC,GAAGkB,SAAlD;AACD;;AAED,SAASY,eAAT,CAAyBhC,GAAzB,EAA8BC,CAA9B,EAAiCC,CAAjC,EAAoC;AAClC,uBAAWF,GAAX,EAAgB,cAAhB,EAAgCC,CAAC,GAAGmB,SAApC,EAA+C,CAAClB,CAAC,GAAG,CAAL,IAAUkB,SAAzD;AACA,uBAAWpB,GAAX,EAAgB,UAAhB,EAA4BC,CAAC,GAAGmB,SAAhC,EAA2ClB,CAAC,GAAGkB,SAA/C;AACD;;AAED,SAASmB,yBAAT,CAAmCvC,GAAnC,EAAwCC,CAAxC,EAA2CC,CAA3C,EAA8C;AAC5C,uBAAWF,GAAX,EAAgB,kBAAhB,EAAoCC,CAAC,GAAGmB,SAAxC,EAAmDlB,CAAC,GAAGkB,SAAvD;AACA,uBAAWpB,GAAX,EAAgB,sBAAhB,EAAwCC,CAAC,GAAGmB,SAA5C,EAAuD,CAAClB,CAAC,GAAG,CAAL,IAAUkB,SAAjE;AACD;;AAED,SAASiB,0BAAT,CAAoCrC,GAApC,EAAyCC,CAAzC,EAA4CC,CAA5C,EAA+C;AAC7C,uBAAWF,GAAX,EAAgB,mBAAhB,EAAqCC,CAAC,GAAGmB,SAAzC,EAAoDlB,CAAC,GAAGkB,SAAxD;AACA,uBAAWpB,GAAX,EAAgB,uBAAhB,EAAyCC,CAAC,GAAGmB,SAA7C,EAAwD,CAAClB,CAAC,GAAG,CAAL,IAAUkB,SAAlE;AACD;;AAED,SAASgB,6BAAT,CAAuCpC,GAAvC,EAA4CC,CAA5C,EAA+CC,CAA/C,EAAkD;AAChD,uBAAWF,GAAX,EAAgB,yBAAhB,EAA2CC,CAAC,GAAGmB,SAA/C,EAA0DlB,CAAC,GAAGkB,SAA9D;AACA,uBACEpB,GADF,EAEE,0BAFF,EAGEC,CAAC,GAAGmB,SAHN,EAIE,CAAClB,CAAC,GAAG,CAAL,IAAUkB,SAJZ;AAMD;;AAED,SAASkB,4BAAT,CAAsCtC,GAAtC,EAA2CC,CAA3C,EAA8CC,CAA9C,EAAiD;AAC/C,uBAAWF,GAAX,EAAgB,wBAAhB,EAA0CC,CAAC,GAAGmB,SAA9C,EAAyDlB,CAAC,GAAGkB,SAA7D;AACA,uBAAWpB,GAAX,EAAgB,yBAAhB,EAA2CC,CAAC,GAAGmB,SAA/C,EAA0D,CAAClB,CAAC,GAAG,CAAL,IAAUkB,SAApE;AACD;;AAED,SAASc,gBAAT,CAA0BlC,GAA1B,EAA+BC,CAA/B,EAAkCC,CAAlC,EAAqC;AACnC,uBAAWF,GAAX,EAAgB,SAAhB,EAA2BC,CAAC,GAAGmB,SAA/B,EAA0ClB,CAAC,GAAGkB,SAA9C;AACA,uBAAWpB,GAAX,EAAgB,qBAAhB,EAAuCC,CAAC,GAAGmB,SAA3C,EAAsDlB,CAAC,GAAGkB,SAA1D;AACD;;AAED,SAASe,iBAAT,CAA2BnC,GAA3B,EAAgCC,CAAhC,EAAmCC,CAAnC,EAAsC;AACpC,uBAAWF,GAAX,EAAgB,SAAhB,EAA2BC,CAAC,GAAGmB,SAA/B,EAA0ClB,CAAC,GAAGkB,SAA9C;AACA,uBAAWpB,GAAX,EAAgB,oBAAhB,EAAsCC,CAAC,GAAGmB,SAA1C,EAAqDlB,CAAC,GAAGkB,SAAzD;AACD;;AAED,SAASa,kBAAT,CAA4BjC,GAA5B,EAAiCC,CAAjC,EAAoCC,CAApC,EAAuC;AACrC,uBAAWF,GAAX,EAAgB,UAAhB,EAA4BC,CAAC,GAAGmB,SAAhC,EAA2ClB,CAAC,GAAGkB,SAA/C;AACA,uBAAWpB,GAAX,EAAgB,cAAhB,EAAgCC,CAAC,GAAGmB,SAApC,EAA+C,CAAClB,CAAC,GAAG,CAAL,IAAUkB,SAAzD;AACD;;AAED,IAAMG,WAAW,GAAGqB,eAAMzD,KAAN,CAAY,IAAZ,EAAkBC,GAAlB,CAAsB,UAAAC,IAAI;AAAA,SAAIA,IAAI,CAACF,KAAL,CAAW,EAAX,CAAJ;AAAA,CAA1B,CAApB;;AAEA,SAASuC,YAAT,CAAsBzB,CAAtB,EAAyBC,CAAzB,EAA4B;AAC1B,SAAOqB,WAAW,CAACrB,CAAD,CAAX,IAAkBqB,WAAW,CAACrB,CAAD,CAAX,CAAeD,CAAf,CAAzB;AACD;;;;;;;;;ACpJD,SAAS4C,MAAT,CAAgB7C,GAAhB,EAAqB;AACnBA,EAAAA,GAAG,CAACK,IAAJ;AACAL,EAAAA,GAAG,CAAC8C,SAAJ,GAAgB,MAAhB;AACA9C,EAAAA,GAAG,CAAC+C,QAAJ,CAAa,UAAb,EAAyB,CAAzB,EAA4B,EAA5B;AACA/C,EAAAA,GAAG,CAACY,OAAJ;AACD;;eAEciC;;;;;;;;;;ACPf;;;;;;;;IAEqBG;AACnB,kBAAY/C,CAAZ,EAAeC,CAAf,EAA+C;AAAA,QAA7B+C,KAA6B,uEAArB,EAAqB;AAAA,QAAjB9C,OAAiB,uEAAP,KAAO;;AAAA;;AAC7C,SAAKF,CAAL,GAASA,CAAT;AACA,SAAKC,CAAL,GAASA,CAAT;AACA,SAAK+C,KAAL,GAAaA,KAAb;AACA,SAAKC,SAAL,GAAiB,CAAC,CAAD,EAAG,CAAH,CAAjB;AACA,SAAK/C,OAAL,GAAeA,OAAf;AACD;;;;yBAEIH,KAAK;AACR,iCAAcA,GAAd,EAAmB,KAAKmD,QAAL,KAAkB,qBAAlB,GAA0C,oBAA7D,EAAmF,KAAKlD,CAAxF,EAA2F,KAAKC,CAAhG,EAAmG,KAAKC,OAAxG;AACD;;;2BAEMiD,IAAI;AACT,UAAMC,gBAAgB,GAAG,KAAKH,SAAL,CAAe,CAAf,MAAsB,CAAtB,IAA2B,KAAKA,SAAL,CAAe,CAAf,MAAsB,CAAjD,GAAqD,GAArD,GAA2D,CAApF;AACA,WAAKjD,CAAL,GAASoD,gBAAgB,GAAG,KAAKH,SAAL,CAAe,CAAf,CAAnB,GAAuC,KAAKD,KAA5C,GAAoDG,EAA7D;AACA,WAAKlD,CAAL,GAASmD,gBAAgB,GAAG,KAAKH,SAAL,CAAe,CAAf,CAAnB,GAAuC,KAAKD,KAA5C,GAAoDG,EAA7D;AACD;;;iCAEYE,YAAYC,UAAU;AACjC,WAAKL,SAAL,GAAiB,CAACI,UAAD,EAAaC,QAAb,CAAjB;AACD;;;+BAEU;AACT,aAAO,KAAKL,SAAL,CAAe,CAAf,MAAsB,CAAtB,IAA2B,KAAKA,SAAL,CAAe,CAAf,MAAsB,CAAxD;AACD;;;;;;;;;;AC3BH;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,IAAMM,IAAI,GAAG,8BAAb;AACA,IAAMC,MAAM,GAAG,IAAIC,qBAAJ,EAAf;AAEAF,IAAI,CAACG,MAAL,CAAYC,MAAZ,GAAqB,GAArB;AACAJ,IAAI,CAACG,MAAL,CAAYlD,KAAZ,GAAoB,GAApB;AAEA,IAAMoD,MAAM,GAAG,IAAIb,eAAJ,CAAW,GAAX,EAAgB,GAAhB,CAAf;AAEA,IAAMc,QAAQ,GAAG,CAACD,MAAD,CAAjB;AAEAL,IAAI,CAACnL,EAAL,CAAQ,MAAR,EAAgB,UAAS2H,GAAT,EAAcoD,EAAd,EAAkB;AAChC,sBAAUpD,GAAV;AACA+D,EAAAA,YAAY,CAAC/D,GAAD,CAAZ;AACA,mBAAOA,GAAP;AACD,CAJD;AAMAwD,IAAI,CAACnL,EAAL,CAAQ,QAAR,EAAkB,UAAS+K,EAAT,EAAY;AAC5B,MAAIE,UAAU,GAAG,CAAjB;AACA,MAAIC,QAAQ,GAAG,CAAf;;AACA,MAAIE,MAAM,CAACO,MAAP,CAAc,MAAd,CAAJ,EAA2B;AACzBV,IAAAA,UAAU,IAAI,CAAd;AACD;;AACD,MAAIG,MAAM,CAACO,MAAP,CAAc,OAAd,CAAJ,EAA4B;AAC1BV,IAAAA,UAAU,IAAI,CAAd;AACD;;AACD,MAAIG,MAAM,CAACO,MAAP,CAAc,IAAd,CAAJ,EAAyB;AACvBT,IAAAA,QAAQ,IAAI,CAAZ;AACD;;AACD,MAAIE,MAAM,CAACO,MAAP,CAAc,MAAd,CAAJ,EAA2B;AACzBT,IAAAA,QAAQ,IAAI,CAAZ;AACD;;AAEDM,EAAAA,MAAM,CAACI,IAAP,CAAYX,UAAZ,EAAwBC,QAAxB;AACD,CAjBD;AAmBAC,IAAI,CAACU,KAAL;;AAEA,SAASH,YAAT,CAAsB/D,GAAtB,EAA2B;AACzB8D,EAAAA,QAAQ,CAACtC,OAAT,CAAiB,UAAA2C,EAAE;AAAA,WAAIA,EAAE,CAACC,IAAH,CAAQpE,GAAR,CAAJ;AAAA,GAAnB;AACD;;;AC9CD,IAAIqE,UAAU,GAAG,4BAAjB;AAEA,IAAIC,SAAS,GAAG3O,MAAM,CAAC4O,MAAP,CAAcC,MAA9B;;AAEA,SAASA,MAAT,CAAgBC,UAAhB,EAA4B;AAC1BH,EAAAA,SAAS,CAAC/N,IAAV,CAAe,IAAf,EAAqBkO,UAArB;AACA,OAAKC,GAAL,GAAW;AACTC,IAAAA,IAAI,EAAEhP,MAAM,CAAC4O,MAAP,CAAcK,OADX;AAETC,IAAAA,gBAAgB,EAAE,EAFT;AAGTC,IAAAA,iBAAiB,EAAE,EAHV;AAITC,IAAAA,MAAM,EAAE,UAAUC,EAAV,EAAc;AACpB,WAAKH,gBAAL,CAAsBnN,IAAtB,CAA2BsN,EAAE,IAAI,YAAY,CAAE,CAA/C;AACD,KANQ;AAOTC,IAAAA,OAAO,EAAE,UAAUD,EAAV,EAAc;AACrB,WAAKF,iBAAL,CAAuBpN,IAAvB,CAA4BsN,EAA5B;AACD;AATQ,GAAX;AAYArP,EAAAA,MAAM,CAAC4O,MAAP,CAAcK,OAAd,GAAwB,IAAxB;AACD;;AAEDjP,MAAM,CAAC4O,MAAP,CAAcC,MAAd,GAAuBA,MAAvB;AACA,IAAIU,aAAJ,EAAmBC,cAAnB;AAEA,IAAIC,MAAM,GAAGzP,MAAM,CAAC4O,MAAP,CAAca,MAA3B;;AACA,IAAI,CAAC,CAACA,MAAD,IAAW,CAACA,MAAM,CAACC,eAApB,KAAwC,OAAOC,SAAP,KAAqB,WAAjE,EAA8E;AAC5E,MAAIC,QAAQ,GAAG,MAA4BC,QAAQ,CAACD,QAApD;AACA,MAAIE,QAAQ,GAAGD,QAAQ,CAACC,QAAT,KAAsB,QAAtB,GAAiC,KAAjC,GAAyC,IAAxD;AACA,MAAIC,EAAE,GAAG,IAAIJ,SAAJ,CAAcG,QAAQ,GAAG,KAAX,GAAmBF,QAAnB,GAA8B,GAA9B,aAA2D,GAAzE,CAAT;;AACAG,EAAAA,EAAE,CAACC,SAAH,GAAe,UAASC,KAAT,EAAgB;AAC7BV,IAAAA,aAAa,GAAG,EAAhB;AACAC,IAAAA,cAAc,GAAG,EAAjB;AAEA,QAAIR,IAAI,GAAGkB,IAAI,CAACC,KAAL,CAAWF,KAAK,CAACjB,IAAjB,CAAX;;AAEA,QAAIA,IAAI,CAAC5I,IAAL,KAAc,QAAlB,EAA4B;AAC1B,UAAIgK,OAAO,GAAG,KAAd;AACApB,MAAAA,IAAI,CAACqB,MAAL,CAAYxE,OAAZ,CAAoB,UAASyE,KAAT,EAAgB;AAClC,YAAI,CAACA,KAAK,CAACC,KAAX,EAAkB;AAChB,cAAIC,SAAS,GAAGC,cAAc,CAACC,MAAM,CAACC,aAAR,EAAuBL,KAAK,CAACvD,EAA7B,CAA9B;;AACA,cAAIyD,SAAJ,EAAe;AACbJ,YAAAA,OAAO,GAAG,IAAV;AACD;AACF;AACF,OAPD,EAF0B,CAW1B;;AACAA,MAAAA,OAAO,GAAGA,OAAO,IAAIpB,IAAI,CAACqB,MAAL,CAAYO,KAAZ,CAAkB,UAASN,KAAT,EAAgB;AACrD,eAAOA,KAAK,CAAClK,IAAN,KAAe,KAAf,IAAwBkK,KAAK,CAACO,SAAN,CAAgBC,EAA/C;AACD,OAFoB,CAArB;;AAIA,UAAIV,OAAJ,EAAa;AACX7L,QAAAA,OAAO,CAACwM,KAAR;AAEA/B,QAAAA,IAAI,CAACqB,MAAL,CAAYxE,OAAZ,CAAoB,UAAUyE,KAAV,EAAiB;AACnCU,UAAAA,QAAQ,CAACN,MAAM,CAACC,aAAR,EAAuBL,KAAvB,CAAR;AACD,SAFD;AAIAd,QAAAA,cAAc,CAAC3D,OAAf,CAAuB,UAAUoF,CAAV,EAAa;AAClCC,UAAAA,YAAY,CAACD,CAAC,CAAC,CAAD,CAAF,EAAOA,CAAC,CAAC,CAAD,CAAR,CAAZ;AACD,SAFD;AAGD,OAVD,MAUO,IAAIpB,QAAQ,CAACsB,MAAb,EAAqB;AAAE;AAC5BtB,QAAAA,QAAQ,CAACsB,MAAT;AACD;AACF;;AAED,QAAInC,IAAI,CAAC5I,IAAL,KAAc,QAAlB,EAA4B;AAC1B2J,MAAAA,EAAE,CAACqB,KAAH;;AACArB,MAAAA,EAAE,CAACsB,OAAH,GAAa,YAAY;AACvBxB,QAAAA,QAAQ,CAACsB,MAAT;AACD,OAFD;AAGD;;AAED,QAAInC,IAAI,CAAC5I,IAAL,KAAc,gBAAlB,EAAoC;AAClC7B,MAAAA,OAAO,CAAC+M,GAAR,CAAY,2BAAZ;AAEAC,MAAAA,kBAAkB;AACnB;;AAED,QAAIvC,IAAI,CAAC5I,IAAL,KAAc,OAAlB,EAA2B;AACzB7B,MAAAA,OAAO,CAACgC,KAAR,CAAc,kBAAkByI,IAAI,CAACzI,KAAL,CAAWG,OAA7B,GAAuC,IAAvC,GAA8CsI,IAAI,CAACzI,KAAL,CAAWiL,KAAvE;AAEAD,MAAAA,kBAAkB;AAElB,UAAIE,OAAO,GAAGC,kBAAkB,CAAC1C,IAAD,CAAhC;AACApE,MAAAA,QAAQ,CAAC+G,IAAT,CAAcC,WAAd,CAA0BH,OAA1B;AACD;AACF,GA1DD;AA2DD;;AAED,SAASF,kBAAT,GAA8B;AAC5B,MAAIE,OAAO,GAAG7G,QAAQ,CAACC,cAAT,CAAwB6D,UAAxB,CAAd;;AACA,MAAI+C,OAAJ,EAAa;AACXA,IAAAA,OAAO,CAACI,MAAR;AACD;AACF;;AAED,SAASH,kBAAT,CAA4B1C,IAA5B,EAAkC;AAChC,MAAIyC,OAAO,GAAG7G,QAAQ,CAACkH,aAAT,CAAuB,KAAvB,CAAd;AACAL,EAAAA,OAAO,CAAC1E,EAAR,GAAa2B,UAAb,CAFgC,CAIhC;;AACA,MAAIhI,OAAO,GAAGkE,QAAQ,CAACkH,aAAT,CAAuB,KAAvB,CAAd;AACA,MAAIC,UAAU,GAAGnH,QAAQ,CAACkH,aAAT,CAAuB,KAAvB,CAAjB;AACApL,EAAAA,OAAO,CAACsL,SAAR,GAAoBhD,IAAI,CAACzI,KAAL,CAAWG,OAA/B;AACAqL,EAAAA,UAAU,CAACC,SAAX,GAAuBhD,IAAI,CAACzI,KAAL,CAAWiL,KAAlC;AAEAC,EAAAA,OAAO,CAACQ,SAAR,GACE,2NACE,mFADF,GAEE,yEAFF,GAGE,qEAHF,GAG0EvL,OAAO,CAACuL,SAHlF,GAG8F,QAH9F,GAIE,OAJF,GAIYF,UAAU,CAACE,SAJvB,GAImC,QAJnC,GAKA,QANF;AASA,SAAOR,OAAP;AAED;;AAED,SAASS,UAAT,CAAoBtD,MAApB,EAA4B7B,EAA5B,EAAgC;AAC9B,MAAIoF,OAAO,GAAGvD,MAAM,CAACuD,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ,WAAO,EAAP;AACD;;AAED,MAAIC,OAAO,GAAG,EAAd;AACA,MAAIC,CAAJ,EAAOC,CAAP,EAAUC,GAAV;;AAEA,OAAKF,CAAL,IAAUF,OAAV,EAAmB;AACjB,SAAKG,CAAL,IAAUH,OAAO,CAACE,CAAD,CAAP,CAAW,CAAX,CAAV,EAAyB;AACvBE,MAAAA,GAAG,GAAGJ,OAAO,CAACE,CAAD,CAAP,CAAW,CAAX,EAAcC,CAAd,CAAN;;AACA,UAAIC,GAAG,KAAKxF,EAAR,IAAenL,KAAK,CAAC4Q,OAAN,CAAcD,GAAd,KAAsBA,GAAG,CAACA,GAAG,CAACnR,MAAJ,GAAa,CAAd,CAAH,KAAwB2L,EAAjE,EAAsE;AACpEqF,QAAAA,OAAO,CAACrQ,IAAR,CAAasQ,CAAb;AACD;AACF;AACF;;AAED,MAAIzD,MAAM,CAACa,MAAX,EAAmB;AACjB2C,IAAAA,OAAO,GAAGA,OAAO,CAAC/Q,MAAR,CAAe6Q,UAAU,CAACtD,MAAM,CAACa,MAAR,EAAgB1C,EAAhB,CAAzB,CAAV;AACD;;AAED,SAAOqF,OAAP;AACD;;AAED,SAASpB,QAAT,CAAkBpC,MAAlB,EAA0B0B,KAA1B,EAAiC;AAC/B,MAAI6B,OAAO,GAAGvD,MAAM,CAACuD,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,MAAIA,OAAO,CAAC7B,KAAK,CAACvD,EAAP,CAAP,IAAqB,CAAC6B,MAAM,CAACa,MAAjC,EAAyC;AACvC,QAAIJ,EAAE,GAAG,IAAItL,QAAJ,CAAa,SAAb,EAAwB,QAAxB,EAAkC,SAAlC,EAA6CuM,KAAK,CAACO,SAAN,CAAgBC,EAA7D,CAAT;AACAR,IAAAA,KAAK,CAACC,KAAN,GAAc,CAAC4B,OAAO,CAAC7B,KAAK,CAACvD,EAAP,CAAtB;AACAoF,IAAAA,OAAO,CAAC7B,KAAK,CAACvD,EAAP,CAAP,GAAoB,CAACsC,EAAD,EAAKiB,KAAK,CAACmC,IAAX,CAApB;AACD,GAJD,MAIO,IAAI7D,MAAM,CAACa,MAAX,EAAmB;AACxBuB,IAAAA,QAAQ,CAACpC,MAAM,CAACa,MAAR,EAAgBa,KAAhB,CAAR;AACD;AACF;;AAED,SAASG,cAAT,CAAwB7B,MAAxB,EAAgC7B,EAAhC,EAAoC;AAClC,MAAIoF,OAAO,GAAGvD,MAAM,CAACuD,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,MAAI,CAACA,OAAO,CAACpF,EAAD,CAAR,IAAgB6B,MAAM,CAACa,MAA3B,EAAmC;AACjC,WAAOgB,cAAc,CAAC7B,MAAM,CAACa,MAAR,EAAgB1C,EAAhB,CAArB;AACD;;AAED,MAAIwC,aAAa,CAACxC,EAAD,CAAjB,EAAuB;AACrB;AACD;;AACDwC,EAAAA,aAAa,CAACxC,EAAD,CAAb,GAAoB,IAApB;AAEA,MAAI2F,MAAM,GAAG9D,MAAM,CAAC+D,KAAP,CAAa5F,EAAb,CAAb;AAEAyC,EAAAA,cAAc,CAACzN,IAAf,CAAoB,CAAC6M,MAAD,EAAS7B,EAAT,CAApB;;AAEA,MAAI2F,MAAM,IAAIA,MAAM,CAAC3D,GAAjB,IAAwB2D,MAAM,CAAC3D,GAAP,CAAWG,gBAAX,CAA4B9N,MAAxD,EAAgE;AAC9D,WAAO,IAAP;AACD;;AAED,SAAO8Q,UAAU,CAACxB,MAAM,CAACC,aAAR,EAAuB5D,EAAvB,CAAV,CAAqC6F,IAArC,CAA0C,UAAU7F,EAAV,EAAc;AAC7D,WAAO0D,cAAc,CAACC,MAAM,CAACC,aAAR,EAAuB5D,EAAvB,CAArB;AACD,GAFM,CAAP;AAGD;;AAED,SAASmE,YAAT,CAAsBtC,MAAtB,EAA8B7B,EAA9B,EAAkC;AAChC,MAAI2F,MAAM,GAAG9D,MAAM,CAAC+D,KAAP,CAAa5F,EAAb,CAAb;AACA6B,EAAAA,MAAM,CAACK,OAAP,GAAiB,EAAjB;;AACA,MAAIyD,MAAJ,EAAY;AACVA,IAAAA,MAAM,CAAC3D,GAAP,CAAWC,IAAX,GAAkBJ,MAAM,CAACK,OAAzB;AACD;;AAED,MAAIyD,MAAM,IAAIA,MAAM,CAAC3D,GAAjB,IAAwB2D,MAAM,CAAC3D,GAAP,CAAWI,iBAAX,CAA6B/N,MAAzD,EAAiE;AAC/DsR,IAAAA,MAAM,CAAC3D,GAAP,CAAWI,iBAAX,CAA6BtD,OAA7B,CAAqC,UAAUgH,EAAV,EAAc;AACjDA,MAAAA,EAAE,CAACjE,MAAM,CAACK,OAAR,CAAF;AACD,KAFD;AAGD;;AAED,SAAOL,MAAM,CAAC+D,KAAP,CAAa5F,EAAb,CAAP;AACA6B,EAAAA,MAAM,CAAC7B,EAAD,CAAN;AAEA2F,EAAAA,MAAM,GAAG9D,MAAM,CAAC+D,KAAP,CAAa5F,EAAb,CAAT;;AACA,MAAI2F,MAAM,IAAIA,MAAM,CAAC3D,GAAjB,IAAwB2D,MAAM,CAAC3D,GAAP,CAAWG,gBAAX,CAA4B9N,MAAxD,EAAgE;AAC9DsR,IAAAA,MAAM,CAAC3D,GAAP,CAAWG,gBAAX,CAA4BrD,OAA5B,CAAoC,UAAUgH,EAAV,EAAc;AAChDA,MAAAA,EAAE;AACH,KAFD;;AAGA,WAAO,IAAP;AACD;AACF","file":"app.e31bb0bc.js","sourceRoot":"..","sourcesContent":["/*!\r\n * EventEmitter2\r\n * https://github.com/hij1nx/EventEmitter2\r\n *\r\n * Copyright (c) 2013 hij1nx\r\n * Licensed under the MIT license.\r\n */\r\n;!function(undefined) {\r\n\r\n  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\r\n    return Object.prototype.toString.call(obj) === \"[object Array]\";\r\n  };\r\n  var defaultMaxListeners = 10;\r\n\r\n  function init() {\r\n    this._events = {};\r\n    if (this._conf) {\r\n      configure.call(this, this._conf);\r\n    }\r\n  }\r\n\r\n  function configure(conf) {\r\n    if (conf) {\r\n      this._conf = conf;\r\n\r\n      conf.delimiter && (this.delimiter = conf.delimiter);\r\n      this._events.maxListeners = conf.maxListeners !== undefined ? conf.maxListeners : defaultMaxListeners;\r\n      conf.wildcard && (this.wildcard = conf.wildcard);\r\n      conf.newListener && (this.newListener = conf.newListener);\r\n      conf.verboseMemoryLeak && (this.verboseMemoryLeak = conf.verboseMemoryLeak);\r\n\r\n      if (this.wildcard) {\r\n        this.listenerTree = {};\r\n      }\r\n    } else {\r\n      this._events.maxListeners = defaultMaxListeners;\r\n    }\r\n  }\r\n\r\n  function logPossibleMemoryLeak(count, eventName) {\r\n    var errorMsg = '(node) warning: possible EventEmitter memory ' +\r\n        'leak detected. %d listeners added. ' +\r\n        'Use emitter.setMaxListeners() to increase limit.';\r\n\r\n    if(this.verboseMemoryLeak){\r\n      errorMsg += ' Event name: %s.';\r\n      console.error(errorMsg, count, eventName);\r\n    } else {\r\n      console.error(errorMsg, count);\r\n    }\r\n\r\n    if (console.trace){\r\n      console.trace();\r\n    }\r\n  }\r\n\r\n  function EventEmitter(conf) {\r\n    this._events = {};\r\n    this.newListener = false;\r\n    this.verboseMemoryLeak = false;\r\n    configure.call(this, conf);\r\n  }\r\n  EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\r\n\r\n  //\r\n  // Attention, function return type now is array, always !\r\n  // It has zero elements if no any matches found and one or more\r\n  // elements (leafs) if there are matches\r\n  //\r\n  function searchListenerTree(handlers, type, tree, i) {\r\n    if (!tree) {\r\n      return [];\r\n    }\r\n    var listeners=[], leaf, len, branch, xTree, xxTree, isolatedBranch, endReached,\r\n        typeLength = type.length, currentType = type[i], nextType = type[i+1];\r\n    if (i === typeLength && tree._listeners) {\r\n      //\r\n      // If at the end of the event(s) list and the tree has listeners\r\n      // invoke those listeners.\r\n      //\r\n      if (typeof tree._listeners === 'function') {\r\n        handlers && handlers.push(tree._listeners);\r\n        return [tree];\r\n      } else {\r\n        for (leaf = 0, len = tree._listeners.length; leaf < len; leaf++) {\r\n          handlers && handlers.push(tree._listeners[leaf]);\r\n        }\r\n        return [tree];\r\n      }\r\n    }\r\n\r\n    if ((currentType === '*' || currentType === '**') || tree[currentType]) {\r\n      //\r\n      // If the event emitted is '*' at this part\r\n      // or there is a concrete match at this patch\r\n      //\r\n      if (currentType === '*') {\r\n        for (branch in tree) {\r\n          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\r\n            listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i+1));\r\n          }\r\n        }\r\n        return listeners;\r\n      } else if(currentType === '**') {\r\n        endReached = (i+1 === typeLength || (i+2 === typeLength && nextType === '*'));\r\n        if(endReached && tree._listeners) {\r\n          // The next element has a _listeners, add it to the handlers.\r\n          listeners = listeners.concat(searchListenerTree(handlers, type, tree, typeLength));\r\n        }\r\n\r\n        for (branch in tree) {\r\n          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\r\n            if(branch === '*' || branch === '**') {\r\n              if(tree[branch]._listeners && !endReached) {\r\n                listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], typeLength));\r\n              }\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\r\n            } else if(branch === nextType) {\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i+2));\r\n            } else {\r\n              // No match on this one, shift into the tree but not in the type array.\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\r\n            }\r\n          }\r\n        }\r\n        return listeners;\r\n      }\r\n\r\n      listeners = listeners.concat(searchListenerTree(handlers, type, tree[currentType], i+1));\r\n    }\r\n\r\n    xTree = tree['*'];\r\n    if (xTree) {\r\n      //\r\n      // If the listener tree will allow any match for this part,\r\n      // then recursively explore all branches of the tree\r\n      //\r\n      searchListenerTree(handlers, type, xTree, i+1);\r\n    }\r\n\r\n    xxTree = tree['**'];\r\n    if(xxTree) {\r\n      if(i < typeLength) {\r\n        if(xxTree._listeners) {\r\n          // If we have a listener on a '**', it will catch all, so add its handler.\r\n          searchListenerTree(handlers, type, xxTree, typeLength);\r\n        }\r\n\r\n        // Build arrays of matching next branches and others.\r\n        for(branch in xxTree) {\r\n          if(branch !== '_listeners' && xxTree.hasOwnProperty(branch)) {\r\n            if(branch === nextType) {\r\n              // We know the next element will match, so jump twice.\r\n              searchListenerTree(handlers, type, xxTree[branch], i+2);\r\n            } else if(branch === currentType) {\r\n              // Current node matches, move into the tree.\r\n              searchListenerTree(handlers, type, xxTree[branch], i+1);\r\n            } else {\r\n              isolatedBranch = {};\r\n              isolatedBranch[branch] = xxTree[branch];\r\n              searchListenerTree(handlers, type, { '**': isolatedBranch }, i+1);\r\n            }\r\n          }\r\n        }\r\n      } else if(xxTree._listeners) {\r\n        // We have reached the end and still on a '**'\r\n        searchListenerTree(handlers, type, xxTree, typeLength);\r\n      } else if(xxTree['*'] && xxTree['*']._listeners) {\r\n        searchListenerTree(handlers, type, xxTree['*'], typeLength);\r\n      }\r\n    }\r\n\r\n    return listeners;\r\n  }\r\n\r\n  function growListenerTree(type, listener) {\r\n\r\n    type = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n\r\n    //\r\n    // Looks for two consecutive '**', if so, don't add the event at all.\r\n    //\r\n    for(var i = 0, len = type.length; i+1 < len; i++) {\r\n      if(type[i] === '**' && type[i+1] === '**') {\r\n        return;\r\n      }\r\n    }\r\n\r\n    var tree = this.listenerTree;\r\n    var name = type.shift();\r\n\r\n    while (name !== undefined) {\r\n\r\n      if (!tree[name]) {\r\n        tree[name] = {};\r\n      }\r\n\r\n      tree = tree[name];\r\n\r\n      if (type.length === 0) {\r\n\r\n        if (!tree._listeners) {\r\n          tree._listeners = listener;\r\n        }\r\n        else {\r\n          if (typeof tree._listeners === 'function') {\r\n            tree._listeners = [tree._listeners];\r\n          }\r\n\r\n          tree._listeners.push(listener);\r\n\r\n          if (\r\n            !tree._listeners.warned &&\r\n            this._events.maxListeners > 0 &&\r\n            tree._listeners.length > this._events.maxListeners\r\n          ) {\r\n            tree._listeners.warned = true;\r\n            logPossibleMemoryLeak.call(this, tree._listeners.length, name);\r\n          }\r\n        }\r\n        return true;\r\n      }\r\n      name = type.shift();\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // By default EventEmitters will print a warning if more than\r\n  // 10 listeners are added to it. This is a useful default which\r\n  // helps finding memory leaks.\r\n  //\r\n  // Obviously not all Emitters should be limited to 10. This function allows\r\n  // that to be increased. Set to zero for unlimited.\r\n\r\n  EventEmitter.prototype.delimiter = '.';\r\n\r\n  EventEmitter.prototype.setMaxListeners = function(n) {\r\n    if (n !== undefined) {\r\n      this._events || init.call(this);\r\n      this._events.maxListeners = n;\r\n      if (!this._conf) this._conf = {};\r\n      this._conf.maxListeners = n;\r\n    }\r\n  };\r\n\r\n  EventEmitter.prototype.event = '';\r\n\r\n  EventEmitter.prototype.once = function(event, fn) {\r\n    this.many(event, 1, fn);\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.many = function(event, ttl, fn) {\r\n    var self = this;\r\n\r\n    if (typeof fn !== 'function') {\r\n      throw new Error('many only accepts instances of Function');\r\n    }\r\n\r\n    function listener() {\r\n      if (--ttl === 0) {\r\n        self.off(event, listener);\r\n      }\r\n      fn.apply(this, arguments);\r\n    }\r\n\r\n    listener._origin = fn;\r\n\r\n    this.on(event, listener);\r\n\r\n    return self;\r\n  };\r\n\r\n  EventEmitter.prototype.emit = function() {\r\n\r\n    this._events || init.call(this);\r\n\r\n    var type = arguments[0];\r\n\r\n    if (type === 'newListener' && !this.newListener) {\r\n      if (!this._events.newListener) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    var al = arguments.length;\r\n    var args,l,i,j;\r\n    var handler;\r\n\r\n    if (this._all && this._all.length) {\r\n      handler = this._all.slice();\r\n      if (al > 3) {\r\n        args = new Array(al);\r\n        for (j = 0; j < al; j++) args[j] = arguments[j];\r\n      }\r\n\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler[i].call(this, type);\r\n          break;\r\n        case 2:\r\n          handler[i].call(this, type, arguments[1]);\r\n          break;\r\n        case 3:\r\n          handler[i].call(this, type, arguments[1], arguments[2]);\r\n          break;\r\n        default:\r\n          handler[i].apply(this, args);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      handler = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\r\n    } else {\r\n      handler = this._events[type];\r\n      if (typeof handler === 'function') {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler.call(this);\r\n          break;\r\n        case 2:\r\n          handler.call(this, arguments[1]);\r\n          break;\r\n        case 3:\r\n          handler.call(this, arguments[1], arguments[2]);\r\n          break;\r\n        default:\r\n          args = new Array(al - 1);\r\n          for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n          handler.apply(this, args);\r\n        }\r\n        return true;\r\n      } else if (handler) {\r\n        // need to make copy of handlers because list can change in the middle\r\n        // of emit call\r\n        handler = handler.slice();\r\n      }\r\n    }\r\n\r\n    if (handler && handler.length) {\r\n      if (al > 3) {\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n      }\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler[i].call(this);\r\n          break;\r\n        case 2:\r\n          handler[i].call(this, arguments[1]);\r\n          break;\r\n        case 3:\r\n          handler[i].call(this, arguments[1], arguments[2]);\r\n          break;\r\n        default:\r\n          handler[i].apply(this, args);\r\n        }\r\n      }\r\n      return true;\r\n    } else if (!this._all && type === 'error') {\r\n      if (arguments[1] instanceof Error) {\r\n        throw arguments[1]; // Unhandled 'error' event\r\n      } else {\r\n        throw new Error(\"Uncaught, unspecified 'error' event.\");\r\n      }\r\n      return false;\r\n    }\r\n\r\n    return !!this._all;\r\n  };\r\n\r\n  EventEmitter.prototype.emitAsync = function() {\r\n\r\n    this._events || init.call(this);\r\n\r\n    var type = arguments[0];\r\n\r\n    if (type === 'newListener' && !this.newListener) {\r\n        if (!this._events.newListener) { return Promise.resolve([false]); }\r\n    }\r\n\r\n    var promises= [];\r\n\r\n    var al = arguments.length;\r\n    var args,l,i,j;\r\n    var handler;\r\n\r\n    if (this._all) {\r\n      if (al > 3) {\r\n        args = new Array(al);\r\n        for (j = 1; j < al; j++) args[j] = arguments[j];\r\n      }\r\n      for (i = 0, l = this._all.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          promises.push(this._all[i].call(this, type));\r\n          break;\r\n        case 2:\r\n          promises.push(this._all[i].call(this, type, arguments[1]));\r\n          break;\r\n        case 3:\r\n          promises.push(this._all[i].call(this, type, arguments[1], arguments[2]));\r\n          break;\r\n        default:\r\n          promises.push(this._all[i].apply(this, args));\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      handler = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\r\n    } else {\r\n      handler = this._events[type];\r\n    }\r\n\r\n    if (typeof handler === 'function') {\r\n      this.event = type;\r\n      switch (al) {\r\n      case 1:\r\n        promises.push(handler.call(this));\r\n        break;\r\n      case 2:\r\n        promises.push(handler.call(this, arguments[1]));\r\n        break;\r\n      case 3:\r\n        promises.push(handler.call(this, arguments[1], arguments[2]));\r\n        break;\r\n      default:\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n        promises.push(handler.apply(this, args));\r\n      }\r\n    } else if (handler && handler.length) {\r\n      if (al > 3) {\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n      }\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          promises.push(handler[i].call(this));\r\n          break;\r\n        case 2:\r\n          promises.push(handler[i].call(this, arguments[1]));\r\n          break;\r\n        case 3:\r\n          promises.push(handler[i].call(this, arguments[1], arguments[2]));\r\n          break;\r\n        default:\r\n          promises.push(handler[i].apply(this, args));\r\n        }\r\n      }\r\n    } else if (!this._all && type === 'error') {\r\n      if (arguments[1] instanceof Error) {\r\n        return Promise.reject(arguments[1]); // Unhandled 'error' event\r\n      } else {\r\n        return Promise.reject(\"Uncaught, unspecified 'error' event.\");\r\n      }\r\n    }\r\n\r\n    return Promise.all(promises);\r\n  };\r\n\r\n  EventEmitter.prototype.on = function(type, listener) {\r\n    if (typeof type === 'function') {\r\n      this.onAny(type);\r\n      return this;\r\n    }\r\n\r\n    if (typeof listener !== 'function') {\r\n      throw new Error('on only accepts instances of Function');\r\n    }\r\n    this._events || init.call(this);\r\n\r\n    // To avoid recursion in the case that type == \"newListeners\"! Before\r\n    // adding it to the listeners, first emit \"newListeners\".\r\n    this.emit('newListener', type, listener);\r\n\r\n    if (this.wildcard) {\r\n      growListenerTree.call(this, type, listener);\r\n      return this;\r\n    }\r\n\r\n    if (!this._events[type]) {\r\n      // Optimize the case of one listener. Don't need the extra array object.\r\n      this._events[type] = listener;\r\n    }\r\n    else {\r\n      if (typeof this._events[type] === 'function') {\r\n        // Change to array.\r\n        this._events[type] = [this._events[type]];\r\n      }\r\n\r\n      // If we've already got an array, just append.\r\n      this._events[type].push(listener);\r\n\r\n      // Check for listener leak\r\n      if (\r\n        !this._events[type].warned &&\r\n        this._events.maxListeners > 0 &&\r\n        this._events[type].length > this._events.maxListeners\r\n      ) {\r\n        this._events[type].warned = true;\r\n        logPossibleMemoryLeak.call(this, this._events[type].length, type);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.onAny = function(fn) {\r\n    if (typeof fn !== 'function') {\r\n      throw new Error('onAny only accepts instances of Function');\r\n    }\r\n\r\n    if (!this._all) {\r\n      this._all = [];\r\n    }\r\n\r\n    // Add the function to the event listener collection.\r\n    this._all.push(fn);\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\r\n\r\n  EventEmitter.prototype.off = function(type, listener) {\r\n    if (typeof listener !== 'function') {\r\n      throw new Error('removeListener only takes instances of Function');\r\n    }\r\n\r\n    var handlers,leafs=[];\r\n\r\n    if(this.wildcard) {\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\r\n    }\r\n    else {\r\n      // does not use listeners(), so no side effect of creating _events[type]\r\n      if (!this._events[type]) return this;\r\n      handlers = this._events[type];\r\n      leafs.push({_listeners:handlers});\r\n    }\r\n\r\n    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\r\n      var leaf = leafs[iLeaf];\r\n      handlers = leaf._listeners;\r\n      if (isArray(handlers)) {\r\n\r\n        var position = -1;\r\n\r\n        for (var i = 0, length = handlers.length; i < length; i++) {\r\n          if (handlers[i] === listener ||\r\n            (handlers[i].listener && handlers[i].listener === listener) ||\r\n            (handlers[i]._origin && handlers[i]._origin === listener)) {\r\n            position = i;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (position < 0) {\r\n          continue;\r\n        }\r\n\r\n        if(this.wildcard) {\r\n          leaf._listeners.splice(position, 1);\r\n        }\r\n        else {\r\n          this._events[type].splice(position, 1);\r\n        }\r\n\r\n        if (handlers.length === 0) {\r\n          if(this.wildcard) {\r\n            delete leaf._listeners;\r\n          }\r\n          else {\r\n            delete this._events[type];\r\n          }\r\n        }\r\n\r\n        this.emit(\"removeListener\", type, listener);\r\n\r\n        return this;\r\n      }\r\n      else if (handlers === listener ||\r\n        (handlers.listener && handlers.listener === listener) ||\r\n        (handlers._origin && handlers._origin === listener)) {\r\n        if(this.wildcard) {\r\n          delete leaf._listeners;\r\n        }\r\n        else {\r\n          delete this._events[type];\r\n        }\r\n\r\n        this.emit(\"removeListener\", type, listener);\r\n      }\r\n    }\r\n\r\n    function recursivelyGarbageCollect(root) {\r\n      if (root === undefined) {\r\n        return;\r\n      }\r\n      var keys = Object.keys(root);\r\n      for (var i in keys) {\r\n        var key = keys[i];\r\n        var obj = root[key];\r\n        if ((obj instanceof Function) || (typeof obj !== \"object\") || (obj === null))\r\n          continue;\r\n        if (Object.keys(obj).length > 0) {\r\n          recursivelyGarbageCollect(root[key]);\r\n        }\r\n        if (Object.keys(obj).length === 0) {\r\n          delete root[key];\r\n        }\r\n      }\r\n    }\r\n    recursivelyGarbageCollect(this.listenerTree);\r\n\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.offAny = function(fn) {\r\n    var i = 0, l = 0, fns;\r\n    if (fn && this._all && this._all.length > 0) {\r\n      fns = this._all;\r\n      for(i = 0, l = fns.length; i < l; i++) {\r\n        if(fn === fns[i]) {\r\n          fns.splice(i, 1);\r\n          this.emit(\"removeListenerAny\", fn);\r\n          return this;\r\n        }\r\n      }\r\n    } else {\r\n      fns = this._all;\r\n      for(i = 0, l = fns.length; i < l; i++)\r\n        this.emit(\"removeListenerAny\", fns[i]);\r\n      this._all = [];\r\n    }\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\r\n\r\n  EventEmitter.prototype.removeAllListeners = function(type) {\r\n    if (arguments.length === 0) {\r\n      !this._events || init.call(this);\r\n      return this;\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      var leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\r\n\r\n      for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\r\n        var leaf = leafs[iLeaf];\r\n        leaf._listeners = null;\r\n      }\r\n    }\r\n    else if (this._events) {\r\n      this._events[type] = null;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.listeners = function(type) {\r\n    if (this.wildcard) {\r\n      var handlers = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\r\n      return handlers;\r\n    }\r\n\r\n    this._events || init.call(this);\r\n\r\n    if (!this._events[type]) this._events[type] = [];\r\n    if (!isArray(this._events[type])) {\r\n      this._events[type] = [this._events[type]];\r\n    }\r\n    return this._events[type];\r\n  };\r\n\r\n  EventEmitter.prototype.listenerCount = function(type) {\r\n    return this.listeners(type).length;\r\n  };\r\n\r\n  EventEmitter.prototype.listenersAny = function() {\r\n\r\n    if(this._all) {\r\n      return this._all;\r\n    }\r\n    else {\r\n      return [];\r\n    }\r\n\r\n  };\r\n\r\n  if (typeof define === 'function' && define.amd) {\r\n     // AMD. Register as an anonymous module.\r\n    define(function() {\r\n      return EventEmitter;\r\n    });\r\n  } else if (typeof exports === 'object') {\r\n    // CommonJS\r\n    module.exports = EventEmitter;\r\n  }\r\n  else {\r\n    // Browser global.\r\n    window.EventEmitter2 = EventEmitter;\r\n  }\r\n}();\r\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// Generated by CoffeeScript 1.7.1\n(function() {\n  var getNanoSeconds, hrtime, loadTime;\n\n  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n    module.exports = function() {\n      return performance.now();\n    };\n  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n    module.exports = function() {\n      return (getNanoSeconds() - loadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    loadTime = getNanoSeconds();\n  } else if (Date.now) {\n    module.exports = function() {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function() {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n\n}).call(this);\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","if performance? and performance.now\n  module.exports = -> performance.now()\nelse if process? and process.hrtime\n  module.exports = -> (getNanoSeconds() - nodeLoadTime) / 1e6\n  hrtime = process.hrtime\n  getNanoSeconds = ->\n    hr = hrtime()\n    hr[0] * 1e9 + hr[1]\n  moduleLoadTime = getNanoSeconds()\n  upTime = process.uptime() * 1e9\n  nodeLoadTime = moduleLoadTime - upTime\nelse if Date.now\n  module.exports = -> Date.now() - loadTime\n  loadTime = Date.now()\nelse\n  module.exports = -> new Date().getTime() - loadTime\n  loadTime = new Date().getTime()\n","var now = require('performance-now')\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function(object) {\n  if (!object) {\n    object = root;\n  }\n  object.requestAnimationFrame = raf\n  object.cancelAnimationFrame = caf\n}\n","var Emitter = require('eventemitter2').EventEmitter2\nvar now = require('performance-now')\nvar inherits = require('inherits')\nvar raf = require('raf')\n\nmodule.exports = Game\ninherits(Game, Emitter)\n\n/**\n* Create the game\n* @name createGame\n* @param {Object} options\n* @param {Object} options.renderer\n* @param {Number} options.fps\n* @example\n* var createGame = require('gameloop')\n*\n* var game = createGame({\n*   renderer: document.createElement('canvas').getContext('2d')\n* })\n*/\nfunction Game (options) {\n  if (!(this instanceof Game)) return new Game(options)\n  options = options || {}\n  Emitter.call(this)\n  this.paused = true\n  this.renderer = options.renderer || {}\n  this.fps = options.fps || 60\n  this.step = 1 / this.fps\n}\n\n/**\n* Start the game. Emits the `start` event.\n* @name game.start\n* @fires Game#start\n* @param {Object} state – arbitrary starting game state emitted by `start` event.\n* @example\n* game.start()\n*/\nGame.prototype.start = function start (state) {\n  this.paused = false\n  this.last = now()\n  this.time = 0\n  this.accumulator = 0\n  this.emit('start', state)\n  raf(this.frame.bind(this))\n}\n\n/**\n* Execute a frame\n* @name game.frame\n* @private\n*/\nGame.prototype.frame = function frame (time) {\n  if (!this.paused) {\n    var newTime = now()\n    var dt = (newTime - this.last) / 1000\n    if (dt > 0.2) dt = this.step\n    this.accumulator += dt\n    this.last = newTime\n\n    while (this.accumulator >= this.step) {\n      this.time += this.step\n      this.accumulator -= this.step\n      this.update(this.step, this.time)\n    }\n\n    this.draw(this.renderer, this.accumulator / this.step)\n    raf(this.frame.bind(this))\n  }\n}\n\n/**\n* Update the game state. Emits the `update` event. You'll likely never call this method, but you may need to override it. Make sure to always emit the update event with the `delta` time.\n* @name game.update\n* @param {Number} interval – interval between each frame\n* @param {Number} time – total time elapsed\n* @fires Game#update\n*/\nGame.prototype.update = function update (interval, time) {\n  this.emit('update', interval, time)\n}\n\n/**\n* Draw the game. Emits the `draw` event. You'll likely never call this method, but you may need to override it. Make sure to always emit the update event with the renderer and `delta` time.\n* @name game.draw\n* @param {Object} renderer\n* @param {Number} deltaTime – time remaining until game.update is called\n* @fires Game#draw\n*/\nGame.prototype.draw = function draw (renderer, frameState) {\n  this.emit('draw', renderer, frameState)\n}\n\n/**\n* End the game. Emits the `end` event/\n* @name game.end\n* @param {Object} state – state of end game conditions\n* @fires Game#end\n* @example\n* game.end()\n*/\nGame.prototype.end = function end (state) {\n  this.emit('end', state)\n}\n\n/**\n* Pause the game. Emits the `pause` event.\n* @name game.pause\n* @fires Game#pause\n* @example\n* game.pause()\n*/\nGame.prototype.pause = function pause () {\n  if (!this.paused) {\n    this.paused = true\n    this.emit('pause')\n  }\n}\n\n/**\n* Resume the game. Emits the `resume` event.\n* @name game.resume\n* @fires Game#resume\n* @example\n* game.resume()\n*/\nGame.prototype.resume = function resume () {\n  if (this.paused) {\n    this.start()\n    this.emit('resume')\n  }\n}\n\n/**\n* Pause or start game depending on game state. Emits either the `pause` or `resume` event.\n* @name game.toggle\n* @example\n* game.toggle()\n*/\nGame.prototype.toggle = function toggle () {\n  if (this.paused) this.resume()\n  else this.pause()\n}\n\n/* Event documentation */\n\n/**\n* Start event. Fired when `game.start()` is called.\n*\n* @event Game#start\n* @example\n* game.on('start', function () {})\n*/\n\n/**\n* End event. Fired when `game.end()` is called.\n*\n* @event Game#end\n* @param {Object} state - state of end game conditions\n* @example\n* game.on('end', function (state) {})\n*/\n\n/**\n* Update event.\n*\n* @event Game#update\n* @param {Number} interval – interval between each frame\n* @param {Number} frameState – current state of the completion of the frame\n* @param {Number} time – total time elapsed\n* @example\n* game.on('update', function (interval, time) {\n*   console.log(interval)\n* })\n*/\n\n/**\n* Draw event.\n*\n* @event Game#draw\n* @param {Number} frameState – current state of the completion of the frame\n* @param {Number} delta\n* @example\n* game.on('draw', function (renderer, dt) {\n*   console.log(dt)\n* })\n*/\n\n/**\n* Pause event. Fired when `game.pause()` is called.\n*\n* @event Game#pause\n* @example\n* game.on('pause', function () {})\n*/\n\n/**\n* Resume event. Fired when `game.resume()` is called.\n*\n* @event Game#resume\n* @example\n* game.on('resume', function () {})\n*/\n","var GameLoop = require('gameloop')\n\nmodule.exports = function (options) {\n  options || (options = {})\n  var canvas\n\n  if (!options.canvas) {\n    canvas = document.createElement('canvas')\n    canvas.id = 'game'\n    document.body.appendChild(canvas)\n  } else if (typeof options.canvas === 'string') {\n    canvas = document.getElementById(options.canvas)\n  } else if (typeof options.canvas === 'object' && options.canvas.tagName) {\n    canvas = options.canvas\n  }\n\n  var game = new GameLoop({\n    renderer: canvas.getContext('2d')\n  })\n\n  game.canvas = canvas\n  game.width = canvas.width = options.width || 1024\n  game.height = canvas.height = options.height || 480\n\n  return game\n}\n","module.exports = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n","var createGameLoop = require('gameloop-canvas')\nvar isarray = require('isarray')\n\n/**\n* Create the game\n* @name createGame\n* @extends module:gameloop-canvas\n* @param {Object} options\n* @param {Object} [options.canvas] – id or dom node of canvas tag\n* @param {Number} [options.fps]\n* @example\n* var createGame = require('crtrdg-gameloop')\n*\n* var game = createGame({ canvas: 'game' })\n*/\nmodule.exports = function createGame (options) {\n  options = options || {}\n  var game = createGameLoop(options)\n\n  /**\n  * Draw to the canvas\n  * @name game.draw\n  * @param {Object} renderer\n  * @param {Number} delta – time elapsed since last update\n  * @fires Game#draw\n  */\n  game.draw = function crtrdg_gameloop_draw (context, delta) {\n    context.clearRect(0, 0, game.width, game.height)\n    game.emit('draw-background', context, delta)\n    game.drawAllLayers(context, delta)\n    game.emit('draw-foreground', context, delta)\n  }\n\n  game.drawAllLayers = function crtrdg_gameloop_drawAllLayers (context, dt) {\n    if (game.layers && isarray(game.layers)) {\n      for (var i = 0; i < game.layers.length; i++) {\n        game.emit('draw-layer', game.layers[i], context, dt)\n\n        if (game.layers[i] === 0) {\n          game.emit('draw', context, dt)\n        }\n      }\n    } else {\n      game.emit('draw', context, dt)\n    }\n  }\n\n  return game\n}\n\n/* gameloop documentation */\n\n/**\n* Update the game state. Emits the `update` event. You'll likely never call this method, but you may need to override it. Make sure to always emit the update event with the `delta` time.\n* @name game.update\n* @param {Number} delta – time elapsed since last update\n* @fires Game#update\n*/\n\n/**\n* End the game. Emits the `end` event/\n* @name game.end\n* @fires Game#end\n* @example\n* game.end()\n*/\n\n/**\n* Pause or start game depending on game state. Emits either the `pause` or `resume` event.\n* @name game.toggle\n* @example\n* game.toggle()\n*/\n\n/**\n* Resume the game. Emits the `resume` event.\n* @name game.resume\n* @fires Game#resume\n* @example\n* game.resume()\n*/\n\n/* gameloop events */\n\n/**\n* Start event. Fired when `game.start()` is called.\n*\n* @event Game#start\n* @example\n* game.on('start', function () {})\n*/\n\n/**\n* End event. Fired when `game.end()` is called.\n*\n* @event Game#end\n* @example\n* game.on('end', function () {})\n*/\n\n/**\n* Update event.\n*\n* @event Game#update\n* @param {Number} delta\n* @example\n* game.on('update', function (dt) {\n*   console.log(dt)\n* })\n*/\n\n/**\n* Draw event.\n*\n* @event Game#draw\n* @param {Object} renderer\n* @param {Number} delta\n* @example\n* game.on('draw', function (renderer, dt) {\n*   console.log(dt)\n* })\n*/\n\n/**\n* Pause event. Fired when `game.pause()` is called.\n*\n* @event Game#pause\n* @example\n* game.on('pause', function () {})\n*/\n\n/**\n* Resume event. Fired when `game.resume()` is called.\n*\n* @event Game#resume\n* @example\n* game.on('resume', function () {})\n*/\n\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","var EventEmitter = require('events').EventEmitter;\nvar inherits = require('inherits');\n\nmodule.exports = Arrows;\ninherits(Arrows, EventEmitter);\n\nfunction Arrows(){\n\n  this.arrows = {\n    left: {\n      keyDown: false\n    },\n    right: {\n      keyDown: false\n    },\n    up: {\n      keyDown: false\n    },\n    down: {\n      keyDown: false\n    }\n  };\n  this.useArrowKeys(); // adds keyCodes to this.arrows\n  this.init();\n}\n\nArrows.prototype.init = function(){\n  var self = this;\n\n  document.addEventListener('keydown', function(e){\n    for (var direction in self.arrows) {\n      var arrow = self.arrows[direction];\n      if (e.keyCode === arrow.keyCode) {\n        e.preventDefault();\n        arrow.keyDown = true;\n        self.emit(direction, e);\n      }\n    }\n  }, false);\n\n  document.addEventListener('keyup', function(e){\n    e.preventDefault();\n    for (var direction in self.arrows) {\n      var arrow = self.arrows[direction];\n      if (e.keyCode == self.arrows[direction].keyCode) {\n        self.emit(direction + 'Up', e);\n        arrow.keyDown = false;\n      }\n    }\n  }, false);\n};\n\nArrows.prototype.isDown = function (direction) {\n  return this.arrows[direction].keyDown;\n}\n\nArrows.prototype.down = function () {\n  var arrows = [];\n  for (arrow in this.arrows) {\n    if (this.arrows[arrow].keyDown) {\n      arrows.push(arrow);\n    }\n  }\n  return arrows;\n}\n\nArrows.prototype.setArrowKeyCodes = function (left, right, up, down) {\n  this.arrows.left.keyCode = left;\n  this.arrows.left.keyDown = false;\n  this.arrows.right.keyCode = right;\n  this.arrows.right.keyDown = false;\n  this.arrows.up.keyCode = up;\n  this.arrows.up.keyDown = false;\n  this.arrows.down.keyCode = down;\n  this.arrows.down.keyDown = false;\n}\n\nArrows.prototype.useArrowKeys = function () {\n  this.setArrowKeyCodes(37, 39, 38, 40);\n}\n\nArrows.prototype.useWASD = function () {\n  this.setArrowKeyCodes(65, 68, 87, 83);\n}\n","module.exports = `................................\n......door......................\n......____......................\n......____......................\n..._______________________......\n......____..............._......\n......____..............._......\n......____..............._......\n.______________________________.\n.______________________________.\n.______________________________.\n.______________________________.\n.______________________________.\n.______________________________.\n.______________________________.\n.______________________________.\n.______________________________.\n.______________________________.\n.______________________________.\n.______________________________.\n.._____________________________.\n...____________________________.\n....___________________________.\n.....__________________________.\n.............._............_....\n.............._............_....\n.............._............_....\n...........___________________..\n...........______...............\n...........______...............\n................................\n................................`","module.exports = `big_demon_idle_anim  big_demon_idle_anim  big_demon_idle_anim  wall_top_left 16 0 16 16\nwall_top_mid 32 0 16 16\nwall_top_right 48 0 16 16\n\nwall_left 16 16 16 16\nwall_mid 32 16 16 16\nwall_right 48 16 16 16\n\nwall_fountain_top 64 0 16 16\nwall_fountain_mid_red_anim 64 16 16 16 3\nwall_fountain_basin_red_anim 64 32 16 16 3\nwall_fountain_mid_blue_anim 64 48 16 16 3\nwall_fountain_basin_blue_anim 64 64 16 16 3\n\nwall_hole_1 48 32 16 16\nwall_hole_2 48 48 16 16\n\nwall_banner_red 16 32 16 16\nwall_banner_blue 32 32 16 16\nwall_banner_green 16 48 16 16\nwall_banner_yellow 32 48 16 16\n\ncolumn_top 80 80 16 16\ncolumn_mid 80 96 16 16\ncoulmn_base 80 112 16 16\nwall_column_top 96 80 16 16\nwall_column_mid 96 96 16 16\nwall_coulmn_base 96 112 16 16\n\nwall_goo 64 80 16 16\nwall_goo_base 64 96 16 16\n\nfloor_1 16 64 16 16\nfloor_2 32 64 16 16\nfloor_3 48 64 16 16\nfloor_4 16 80 16 16\nfloor_5 32 80 16 16\nfloor_6 48 80 16 16\nfloor_7 16 96 16 16\nfloor_8 32 96 16 16\nfloor_ladder 48 96 16 16\n\nfloor_spikes_anim 16 176 16 16 4\n\nwall_side_top_left 0 112 16 16\nwall_side_top_right 16 112 16 16\nwall_side_mid_left 0 128 16 16\nwall_side_mid_right 16 128 16 16\nwall_side_front_left 0 144 16 16\nwall_side_front_right 16 144 16 16\n\nwall_corner_top_left 32 112 16 16\nwall_corner_top_right 48 112 16 16\nwall_corner_left 32 128 16 16\nwall_corner_right 48 128 16 16\nwall_corner_bottom_left 32 144 16 16\nwall_corner_bottom_right 48 144 16 16\nwall_corner_front_left 32 160 16 16\nwall_corner_front_right 48 160 16 16\n\nwall_inner_corner_l_top_left 80 128 16 16\nwall_inner_corner_l_top_rigth 64 128 16 16\nwall_inner_corner_mid_left 80 144 16 16\nwall_inner_corner_mid_rigth 64 144 16 16\nwall_inner_corner_t_top_left 80 160 16 16\nwallinner_corner_t_top_rigth 64 160 16 16\n\nedge 96 128 16 16\nhole  96 144 16 16\n\ndoors_all 16 221 64 35\ndoors_frame_left 16 224 16 32\ndoors_frame_top 32 221 32 3\ndoors_frame_right 63 224 16 32\ndoors_leaf_closed 32 224 32 32\ndoors_leaf_open 80 224 32 32\n\nchest_empty_open_anim 304 288 16 16 3\nchest_full_open_anim 304 304 16 16 3\nchest_mimic_open_anim 304 320 16 16 3\n\nflask_big_red 288 224 16 16\nflask_big_blue 304 224 16 16\nflask_big_green 320 224 16 16\nflask_big_yellow 336 224 16 16\n\nflask_red 288 240 16 16\nflask_blue 304 240 16 16\nflask_green 320 240 16 16\nflask_yellow 336 240 16 16\n\nskull 288 320 16 16\ncrate 288 298 16 22\n\ncoin_anim 288 272 8 8 4\n\nui_heart_full 288 256 16 16\nui_heart_half 304 256 16 16\nui_heart_empty 320 256 16 16\n\nweapon_knife 293 18 6 13\nweapon_rusty_sword 307 26 10 21\nweapon_regular_sword 323 26 10 21\nweapon_red_gem_sword 339 26 10 21\nweapon_big_hammer 291 42 10 37\nweapon_hammer 307 55 10 24\nweapon_baton_with_spikes 323 57 10 22\nweapon_mace 339 55 10 24\nweapon_katana 293 82 6 29\nweapon_saw_sword 307 86 10 25\nweapon_anime_sword 322 81 12 30\nweapon_axe 341 90 9 21\nweapon_machete 294 121 5 22\nweapon_cleaver 310 124 8 19\nweapon_duel_sword 325 113 9 30\nweapon_knight_sword 339 114 10 29\nweapon_golden_sword 291 153 10 22\nweapon_lavish_sword 307 145 10 30\nweapon_red_magic_staff 324 145 8 30\nweapon_green_magic_staff 340 145 8 30\nweapon_spear 293 177 6 30\n\ntiny_zombie_idle_anim 368 16 16 16 4\ntiny_zombie_run_anim 432 16 16 16 4\ngoblin_idle_anim 368 32 16 16 4\ngoblin_run_anim 432 32 16 16 4\nimp_idle_anim 368 48 16 16 4\nimp_run_anim 432 48 16 16 4\nskelet_idle_anim 368 80 16 16 4\nskelet_run_anim 432 80 16 16 4\nmuddy_idle_anim 368 112 16 16 4\nmuddy_run_anim 368 112 16 16 4\nswampy_idle_anim 432 112 16 16 4\nswampy_run_anim 432 112 16 16 4\nzombie_idle_anim 368 144 16 16 4\nzombie_run_anim 368 144 16 16 4\nice_zombie_idle_anim 432 144 16 16 4\nice_zombie_run_anim 432 144 16 16 4\nmasked_orc_idle_anim 368 172 16 20 4\nmasked_orc_run_anim 432 172 16 20 4\norc_warrior_idle_anim 368 204 16 20 4\norc_warrior_run_anim 432 204 16 20 4\norc_shaman_idle_anim 368 236 16 20 4\norc_shaman_run_anim 432 236 16 20 4\nnecromancer_idle_anim 368 268 16 20 4\nnecromancer_run_anim 368 268 16 20 4\nwogol_idle_anim 368 300 16 20 4\nwogol_run_anim 432 300 16 20 4\nchort_idle_anim 368 328 16 24 4\nchort_run_anim 432 328 16 24 4\nbig_zombie_idle_anim 16 70 32 34 4\nbig_zombie_run_an m 144 270 32 34 big_demon_idle_anim 4\nogre_idle_anim 16 320 32 32 4\nogre_run_anim 144 320 32 32 4\nbig_demon_idle_anim  16 364 32 36 4\nbig_demon_run_anim 144 364 32 36 4\n\nelf_f_idle_anim 128 4 16 28 4\nelf_f_run_anim 192 4 16 28 4\nelf_f_hit_anim 256 4 16 28 1\n\nelf_m_idle_anim 128 36 16 28 4\nelf_m_run_anim 192 36 16 28 4\nelf_m_hit_anim 256 36 16 28 1\n\nknight_f_idle_anim 128 68 16 28 4\nknight_f_run_anim 192 68 16 28 4\nknight_f_hit_anim 256 68 16 28 1\n\nknight_m_idle_anim 128 100 16 28 4\nknight_m_run_anim 192 100 16 28 4\nknight_m_hit_anim 256 100 16 28 1\n\nwizzard_f_idle_anim 128 132 16 28 4\nwizzard_f_run_anim 192 132 16 28 4\nwizzard_f_hit_anim 256 132 16 28 1\n\nwizzard_m_idle_anim 128 164 16 28 4\nwizzard_m_run_anim 192 164 16 28 4\nwizzard_m_hit_anim 256 164 16 28 1\n\nlizard_f_idle_anim 128 196 16 28 4\nlizard_f_run_anim 192 196 16 28 4\nlizard_f_hit_anim 256 196 16 28 1\n\nlizard_m_idle_animanim 256 228 16 28 1\n`","import tilesList from \"../tiles_list_v1.3.txt\"\n\nconst tileset = new Image(512, 512)\n\ntileset.src =\n  \"https://cdn.glitch.com/8804483f-7435-434d-ab8d-d8d811696a6a%2F0x72_DungeonTilesetII_v1.3.png?v=1586091258409\"\n\nconst sprites = tilesList\n  .split(\"\\n\")\n  .map(line => {\n    const [name, sx, sy, swidth, sheight, frames] = line.split(\" \")\n    return {\n      name,\n      sx: parseInt(sx),\n      sy: parseInt(sy),\n      swidth: parseInt(swidth),\n      sheight: parseInt(sheight),\n      frames: parseInt(frames)\n    }\n  })\n  .reduce((prev, { name, ...rest }) => ({ ...prev, [name]: { ...rest } }), {})\n\nfunction drawSprite(ctx, name, x, y, flipped = false) {\n  const sprite = sprites[name]\n\n  if (sprite) {\n    const { sx, sy, swidth, sheight } = sprite\n    ctx.save()\n    if (flipped) {\n      ctx.translate(document.getElementById(\"game\").width, 0)\n      ctx.scale(-1, 1)\n    }\n    ctx.drawImage(\n      tileset,\n      sx,\n      sy,\n      swidth,\n      sheight,\n      x - (flipped ? 2 * swidth : 0),\n      y,\n      swidth,\n      sheight\n    )\n    ctx.restore()\n  }\n}\n\nexport function animateSprite(ctx, name, x, y, flipped = false, delay = 100) {\n  const sprite = sprites[name]\n\n  if (sprite) {\n    const { sx, sy, swidth, sheight, frames } = sprite\n    const frame = Math.round(Date.now() / delay) % frames\n    ctx.save()\n    if (flipped) {\n      ctx.translate(document.getElementById(\"game\").width, 0)\n      ctx.scale(-1, 1)\n    }\n    ctx.drawImage(\n      tileset,\n      sx + frame * swidth,\n      sy,\n      swidth,\n      sheight,\n      x - (flipped ? swidth * (frames + 1) : 0),\n      y,\n      swidth,\n      sheight\n    )\n    ctx.restore()\n  }\n}\n\nexport default drawSprite\n","// A port of an algorithm by Johannes Baagøe <baagoe@baagoe.com>, 2010\n// http://baagoe.com/en/RandomMusings/javascript/\n// https://github.com/nquinlan/better-random-numbers-for-javascript-mirror\n// Original work is under MIT license -\n\n// Copyright (C) 2010 by Johannes Baagøe <baagoe@baagoe.org>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n(function(global, module, define) {\n\nfunction Alea(seed) {\n  var me = this, mash = Mash();\n\n  me.next = function() {\n    var t = 2091639 * me.s0 + me.c * 2.3283064365386963e-10; // 2^-32\n    me.s0 = me.s1;\n    me.s1 = me.s2;\n    return me.s2 = t - (me.c = t | 0);\n  };\n\n  // Apply the seeding algorithm from Baagoe.\n  me.c = 1;\n  me.s0 = mash(' ');\n  me.s1 = mash(' ');\n  me.s2 = mash(' ');\n  me.s0 -= mash(seed);\n  if (me.s0 < 0) { me.s0 += 1; }\n  me.s1 -= mash(seed);\n  if (me.s1 < 0) { me.s1 += 1; }\n  me.s2 -= mash(seed);\n  if (me.s2 < 0) { me.s2 += 1; }\n  mash = null;\n}\n\nfunction copy(f, t) {\n  t.c = f.c;\n  t.s0 = f.s0;\n  t.s1 = f.s1;\n  t.s2 = f.s2;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new Alea(seed),\n      state = opts && opts.state,\n      prng = xg.next;\n  prng.int32 = function() { return (xg.next() * 0x100000000) | 0; }\n  prng.double = function() {\n    return prng() + (prng() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53\n  };\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nfunction Mash() {\n  var n = 0xefc8249d;\n\n  var mash = function(data) {\n    data = String(data);\n    for (var i = 0; i < data.length; i++) {\n      n += data.charCodeAt(i);\n      var h = 0.02519603282416938 * n;\n      n = h >>> 0;\n      h -= n;\n      h *= n;\n      n = h >>> 0;\n      h -= n;\n      n += h * 0x100000000; // 2^32\n    }\n    return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n  };\n\n  return mash;\n}\n\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.alea = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"xor128\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n\n  // Set up generator function.\n  me.next = function() {\n    var t = me.x ^ (me.x << 11);\n    me.x = me.y;\n    me.y = me.z;\n    me.z = me.w;\n    return me.w ^= (me.w >>> 19) ^ t ^ (t >>> 8);\n  };\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor128 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"xorwow\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var t = (me.x ^ (me.x >>> 2));\n    me.x = me.y; me.y = me.z; me.z = me.w; me.w = me.v;\n    return (me.d = (me.d + 362437 | 0)) +\n       (me.v = (me.v ^ (me.v << 4)) ^ (t ^ (t << 1))) | 0;\n  };\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n  me.v = 0;\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    if (k == strseed.length) {\n      me.d = me.x << 10 ^ me.x >>> 4;\n    }\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  t.v = f.v;\n  t.d = f.d;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorwow = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"xorshift7\" algorithm by\n// François Panneton and Pierre L'ecuyer:\n// \"On the Xorgshift Random Number Generators\"\n// http://saluc.engr.uconn.edu/refs/crypto/rng/panneton05onthexorshift.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    // Update xor generator.\n    var X = me.x, i = me.i, t, v, w;\n    t = X[i]; t ^= (t >>> 7); v = t ^ (t << 24);\n    t = X[(i + 1) & 7]; v ^= t ^ (t >>> 10);\n    t = X[(i + 3) & 7]; v ^= t ^ (t >>> 3);\n    t = X[(i + 4) & 7]; v ^= t ^ (t << 7);\n    t = X[(i + 7) & 7]; t = t ^ (t << 13); v ^= t ^ (t << 9);\n    X[i] = v;\n    me.i = (i + 1) & 7;\n    return v;\n  };\n\n  function init(me, seed) {\n    var j, w, X = [];\n\n    if (seed === (seed | 0)) {\n      // Seed state array using a 32-bit integer.\n      w = X[0] = seed;\n    } else {\n      // Seed state using a string.\n      seed = '' + seed;\n      for (j = 0; j < seed.length; ++j) {\n        X[j & 7] = (X[j & 7] << 15) ^\n            (seed.charCodeAt(j) + X[(j + 1) & 7] << 13);\n      }\n    }\n    // Enforce an array length of 8, not all zeroes.\n    while (X.length < 8) X.push(0);\n    for (j = 0; j < 8 && X[j] === 0; ++j);\n    if (j == 8) w = X[7] = -1; else w = X[j];\n\n    me.x = X;\n    me.i = 0;\n\n    // Discard an initial 256 values.\n    for (j = 256; j > 0; --j) {\n      me.next();\n    }\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.x = f.x.slice();\n  t.i = f.i;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.x) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorshift7 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n","// A Javascript implementaion of Richard Brent's Xorgens xor4096 algorithm.\n//\n// This fast non-cryptographic random number generator is designed for\n// use in Monte-Carlo algorithms. It combines a long-period xorshift\n// generator with a Weyl generator, and it passes all common batteries\n// of stasticial tests for randomness while consuming only a few nanoseconds\n// for each prng generated.  For background on the generator, see Brent's\n// paper: \"Some long-period random number generators using shifts and xors.\"\n// http://arxiv.org/pdf/1004.3115v1.pdf\n//\n// Usage:\n//\n// var xor4096 = require('xor4096');\n// random = xor4096(1);                        // Seed with int32 or string.\n// assert.equal(random(), 0.1520436450538547); // (0, 1) range, 53 bits.\n// assert.equal(random.int32(), 1806534897);   // signed int32, 32 bits.\n//\n// For nonzero numeric keys, this impelementation provides a sequence\n// identical to that by Brent's xorgens 3 implementaion in C.  This\n// implementation also provides for initalizing the generator with\n// string seeds, or for saving and restoring the state of the generator.\n//\n// On Chrome, this prng benchmarks about 2.1 times slower than\n// Javascript's built-in Math.random().\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    var w = me.w,\n        X = me.X, i = me.i, t, v;\n    // Update Weyl generator.\n    me.w = w = (w + 0x61c88647) | 0;\n    // Update xor generator.\n    v = X[(i + 34) & 127];\n    t = X[i = ((i + 1) & 127)];\n    v ^= v << 13;\n    t ^= t << 17;\n    v ^= v >>> 15;\n    t ^= t >>> 12;\n    // Update Xor generator array state.\n    v = X[i] = v ^ t;\n    me.i = i;\n    // Result is the combination.\n    return (v + (w ^ (w >>> 16))) | 0;\n  };\n\n  function init(me, seed) {\n    var t, v, i, j, w, X = [], limit = 128;\n    if (seed === (seed | 0)) {\n      // Numeric seeds initialize v, which is used to generates X.\n      v = seed;\n      seed = null;\n    } else {\n      // String seeds are mixed into v and X one character at a time.\n      seed = seed + '\\0';\n      v = 0;\n      limit = Math.max(limit, seed.length);\n    }\n    // Initialize circular array and weyl value.\n    for (i = 0, j = -32; j < limit; ++j) {\n      // Put the unicode characters into the array, and shuffle them.\n      if (seed) v ^= seed.charCodeAt((j + 32) % seed.length);\n      // After 32 shuffles, take v as the starting w value.\n      if (j === 0) w = v;\n      v ^= v << 10;\n      v ^= v >>> 15;\n      v ^= v << 4;\n      v ^= v >>> 13;\n      if (j >= 0) {\n        w = (w + 0x61c88647) | 0;     // Weyl.\n        t = (X[j & 127] ^= (v + w));  // Combine xor and weyl to init array.\n        i = (0 == t) ? i + 1 : 0;     // Count zeroes.\n      }\n    }\n    // We have detected all zeroes; make the key nonzero.\n    if (i >= 128) {\n      X[(seed && seed.length || 0) & 127] = -1;\n    }\n    // Run the generator 512 times to further mix the state before using it.\n    // Factoring this as a function slows the main generator, so it is just\n    // unrolled here.  The weyl generator is not advanced while warming up.\n    i = 127;\n    for (j = 4 * 128; j > 0; --j) {\n      v = X[(i + 34) & 127];\n      t = X[i = ((i + 1) & 127)];\n      v ^= v << 13;\n      t ^= t << 17;\n      v ^= v >>> 15;\n      t ^= t >>> 12;\n      X[i] = v ^ t;\n    }\n    // Storing state as object members is faster than using closure variables.\n    me.w = w;\n    me.X = X;\n    me.i = i;\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.i = f.i;\n  t.w = f.w;\n  t.X = f.X.slice();\n  return t;\n};\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.X) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor4096 = impl;\n}\n\n})(\n  this,                                     // window object or global\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n","// A Javascript implementaion of the \"Tyche-i\" prng algorithm by\n// Samuel Neves and Filipe Araujo.\n// See https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var b = me.b, c = me.c, d = me.d, a = me.a;\n    b = (b << 25) ^ (b >>> 7) ^ c;\n    c = (c - d) | 0;\n    d = (d << 24) ^ (d >>> 8) ^ a;\n    a = (a - b) | 0;\n    me.b = b = (b << 20) ^ (b >>> 12) ^ c;\n    me.c = c = (c - d) | 0;\n    me.d = (d << 16) ^ (c >>> 16) ^ a;\n    return me.a = (a - b) | 0;\n  };\n\n  /* The following is non-inverted tyche, which has better internal\n   * bit diffusion, but which is about 25% slower than tyche-i in JS.\n  me.next = function() {\n    var a = me.a, b = me.b, c = me.c, d = me.d;\n    a = (me.a + me.b | 0) >>> 0;\n    d = me.d ^ a; d = d << 16 ^ d >>> 16;\n    c = me.c + d | 0;\n    b = me.b ^ c; b = b << 12 ^ d >>> 20;\n    me.a = a = a + b | 0;\n    d = d ^ a; me.d = d = d << 8 ^ d >>> 24;\n    me.c = c = c + d | 0;\n    b = b ^ c;\n    return me.b = (b << 7 ^ b >>> 25);\n  }\n  */\n\n  me.a = 0;\n  me.b = 0;\n  me.c = 2654435769 | 0;\n  me.d = 1367130551;\n\n  if (seed === Math.floor(seed)) {\n    // Integer seed.\n    me.a = (seed / 0x100000000) | 0;\n    me.b = seed | 0;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 20; k++) {\n    me.b ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.a = f.a;\n  t.b = f.b;\n  t.c = f.c;\n  t.d = f.d;\n  return t;\n};\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.tychei = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","/*\nCopyright 2019 David Bau.\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\n(function (global, pool, math) {\n//\n// The following constants are related to IEEE 754 limits.\n//\n\nvar width = 256,        // each RC4 output is 0 <= x < 256\n    chunks = 6,         // at least six RC4 outputs for each double\n    digits = 52,        // there are 52 significant digits in a double\n    rngname = 'random', // rngname: name for Math.random and Math.seedrandom\n    startdenom = math.pow(width, chunks),\n    significance = math.pow(2, digits),\n    overflow = significance * 2,\n    mask = width - 1,\n    nodecrypto;         // node.js crypto module, initialized at the bottom.\n\n//\n// seedrandom()\n// This is the seedrandom function described above.\n//\nfunction seedrandom(seed, options, callback) {\n  var key = [];\n  options = (options == true) ? { entropy: true } : (options || {});\n\n  // Flatten the seed string or build one from local entropy if needed.\n  var shortseed = mixkey(flatten(\n    options.entropy ? [seed, tostring(pool)] :\n    (seed == null) ? autoseed() : seed, 3), key);\n\n  // Use the seed to initialize an ARC4 generator.\n  var arc4 = new ARC4(key);\n\n  // This function returns a random double in [0, 1) that contains\n  // randomness in every bit of the mantissa of the IEEE 754 value.\n  var prng = function() {\n    var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\n        d = startdenom,                 //   and denominator d = 2 ^ 48.\n        x = 0;                          //   and no 'extra last byte'.\n    while (n < significance) {          // Fill up all significant digits by\n      n = (n + x) * width;              //   shifting numerator and\n      d *= width;                       //   denominator and generating a\n      x = arc4.g(1);                    //   new least-significant-byte.\n    }\n    while (n >= overflow) {             // To avoid rounding up, before adding\n      n /= 2;                           //   last byte, shift everything\n      d /= 2;                           //   right using integer math until\n      x >>>= 1;                         //   we have exactly the desired bits.\n    }\n    return (n + x) / d;                 // Form the number within [0, 1).\n  };\n\n  prng.int32 = function() { return arc4.g(4) | 0; }\n  prng.quick = function() { return arc4.g(4) / 0x100000000; }\n  prng.double = prng;\n\n  // Mix the randomness into accumulated entropy.\n  mixkey(tostring(arc4.S), pool);\n\n  // Calling convention: what to return as a function of prng, seed, is_math.\n  return (options.pass || callback ||\n      function(prng, seed, is_math_call, state) {\n        if (state) {\n          // Load the arc4 state from the given state if it has an S array.\n          if (state.S) { copy(state, arc4); }\n          // Only provide the .state method if requested via options.state.\n          prng.state = function() { return copy(arc4, {}); }\n        }\n\n        // If called as a method of Math (Math.seedrandom()), mutate\n        // Math.random because that is how seedrandom.js has worked since v1.0.\n        if (is_math_call) { math[rngname] = prng; return seed; }\n\n        // Otherwise, it is a newer calling convention, so return the\n        // prng directly.\n        else return prng;\n      })(\n  prng,\n  shortseed,\n  'global' in options ? options.global : (this == math),\n  options.state);\n}\n\n//\n// ARC4\n//\n// An ARC4 implementation.  The constructor takes a key in the form of\n// an array of at most (width) integers that should be 0 <= x < (width).\n//\n// The g(count) method returns a pseudorandom integer that concatenates\n// the next (count) outputs from ARC4.  Its return value is a number x\n// that is in the range 0 <= x < (width ^ count).\n//\nfunction ARC4(key) {\n  var t, keylen = key.length,\n      me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\n\n  // The empty key [] is treated as [0].\n  if (!keylen) { key = [keylen++]; }\n\n  // Set up S using the standard key scheduling algorithm.\n  while (i < width) {\n    s[i] = i++;\n  }\n  for (i = 0; i < width; i++) {\n    s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\n    s[j] = t;\n  }\n\n  // The \"g\" method returns the next (count) outputs as one number.\n  (me.g = function(count) {\n    // Using instance members instead of closure state nearly doubles speed.\n    var t, r = 0,\n        i = me.i, j = me.j, s = me.S;\n    while (count--) {\n      t = s[i = mask & (i + 1)];\n      r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\n    }\n    me.i = i; me.j = j;\n    return r;\n    // For robust unpredictability, the function call below automatically\n    // discards an initial batch of values.  This is called RC4-drop[256].\n    // See http://google.com/search?q=rsa+fluhrer+response&btnI\n  })(width);\n}\n\n//\n// copy()\n// Copies internal state of ARC4 to or from a plain object.\n//\nfunction copy(f, t) {\n  t.i = f.i;\n  t.j = f.j;\n  t.S = f.S.slice();\n  return t;\n};\n\n//\n// flatten()\n// Converts an object tree to nested arrays of strings.\n//\nfunction flatten(obj, depth) {\n  var result = [], typ = (typeof obj), prop;\n  if (depth && typ == 'object') {\n    for (prop in obj) {\n      try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\n    }\n  }\n  return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\n}\n\n//\n// mixkey()\n// Mixes a string seed into a key that is an array of integers, and\n// returns a shortened string seed that is equivalent to the result key.\n//\nfunction mixkey(seed, key) {\n  var stringseed = seed + '', smear, j = 0;\n  while (j < stringseed.length) {\n    key[mask & j] =\n      mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\n  }\n  return tostring(key);\n}\n\n//\n// autoseed()\n// Returns an object for autoseeding, using window.crypto and Node crypto\n// module if available.\n//\nfunction autoseed() {\n  try {\n    var out;\n    if (nodecrypto && (out = nodecrypto.randomBytes)) {\n      // The use of 'out' to remember randomBytes makes tight minified code.\n      out = out(width);\n    } else {\n      out = new Uint8Array(width);\n      (global.crypto || global.msCrypto).getRandomValues(out);\n    }\n    return tostring(out);\n  } catch (e) {\n    var browser = global.navigator,\n        plugins = browser && browser.plugins;\n    return [+new Date, global, plugins, global.screen, tostring(pool)];\n  }\n}\n\n//\n// tostring()\n// Converts an array of charcodes to a string\n//\nfunction tostring(a) {\n  return String.fromCharCode.apply(0, a);\n}\n\n//\n// When seedrandom.js is loaded, we immediately mix a few bits\n// from the built-in RNG into the entropy pool.  Because we do\n// not want to interfere with deterministic PRNG state later,\n// seedrandom will not call math.random on its own again after\n// initialization.\n//\nmixkey(math.random(), pool);\n\n//\n// Nodejs and AMD support: export the implementation as a module using\n// either convention.\n//\nif ((typeof module) == 'object' && module.exports) {\n  module.exports = seedrandom;\n  // When in node.js, try using crypto package for autoseeding.\n  try {\n    nodecrypto = require('crypto');\n  } catch (ex) {}\n} else if ((typeof define) == 'function' && define.amd) {\n  define(function() { return seedrandom; });\n} else {\n  // When included as a plain script, set up Math.seedrandom global.\n  math['seed' + rngname] = seedrandom;\n}\n\n\n// End anonymous scope, and pass initial values.\n})(\n  // global: `self` in browsers (including strict mode and web workers),\n  // otherwise `this` in Node and other environments\n  (typeof self !== 'undefined') ? self : this,\n  [],     // pool: entropy pool starts empty\n  Math    // math: package containing random, pow, and seedrandom\n);\n","// A library of seedable RNGs implemented in Javascript.\n//\n// Usage:\n//\n// var seedrandom = require('seedrandom');\n// var random = seedrandom(1); // or any seed.\n// var x = random();       // 0 <= x < 1.  Every bit is random.\n// var x = random.quick(); // 0 <= x < 1.  32 bits of randomness.\n\n// alea, a 53-bit multiply-with-carry generator by Johannes Baagøe.\n// Period: ~2^116\n// Reported to pass all BigCrush tests.\nvar alea = require('./lib/alea');\n\n// xor128, a pure xor-shift generator by George Marsaglia.\n// Period: 2^128-1.\n// Reported to fail: MatrixRank and LinearComp.\nvar xor128 = require('./lib/xor128');\n\n// xorwow, George Marsaglia's 160-bit xor-shift combined plus weyl.\n// Period: 2^192-2^32\n// Reported to fail: CollisionOver, SimpPoker, and LinearComp.\nvar xorwow = require('./lib/xorwow');\n\n// xorshift7, by François Panneton and Pierre L'ecuyer, takes\n// a different approach: it adds robustness by allowing more shifts\n// than Marsaglia's original three.  It is a 7-shift generator\n// with 256 bits, that passes BigCrush with no systmatic failures.\n// Period 2^256-1.\n// No systematic BigCrush failures reported.\nvar xorshift7 = require('./lib/xorshift7');\n\n// xor4096, by Richard Brent, is a 4096-bit xor-shift with a\n// very long period that also adds a Weyl generator. It also passes\n// BigCrush with no systematic failures.  Its long period may\n// be useful if you have many generators and need to avoid\n// collisions.\n// Period: 2^4128-2^32.\n// No systematic BigCrush failures reported.\nvar xor4096 = require('./lib/xor4096');\n\n// Tyche-i, by Samuel Neves and Filipe Araujo, is a bit-shifting random\n// number generator derived from ChaCha, a modern stream cipher.\n// https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n// Period: ~2^127\n// No systematic BigCrush failures reported.\nvar tychei = require('./lib/tychei');\n\n// The original ARC4-based prng included in this library.\n// Period: ~2^1600\nvar sr = require('./seedrandom');\n\nsr.alea = alea;\nsr.xor128 = xor128;\nsr.xorwow = xorwow;\nsr.xorshift7 = xorshift7;\nsr.xor4096 = xor4096;\nsr.tychei = tychei;\n\nmodule.exports = sr;\n","import level from \"../level.txt\"\nimport drawSprite from './sprite'\nimport seedrandom from 'seedrandom'\n\nconst TILE_SIZE = 16\n\nexport default drawLevel\n\nfunction drawLevel(ctx) {\n  const rng = seedrandom('bois')\n  levelMatrix.forEach((line, y) =>\n    line.forEach((tile, x) => {\n      if (tile === 'd') {\n        return drawSprite(ctx, \"doors_frame_left\", x * TILE_SIZE, (y - 1) * TILE_SIZE)\n      }\n      if (tile === 'r') {\n        return drawSprite(ctx, \"doors_frame_right\", x * TILE_SIZE, (y - 1) * TILE_SIZE)\n      }\n      if (tile === 'o' && getLevelTile(x + 1, y) === 'o') {\n        return drawSprite(ctx, \"doors_leaf_closed\", x * TILE_SIZE, (y - 1) * TILE_SIZE)\n        return drawSprite(ctx, \"doors_frame_top\", x * TILE_SIZE, (y - 2) * TILE_SIZE)\n      }\n      if (tile === \"_\") {\n        drawFloorTile(ctx, x, y, rng())\n      } else if (tile === \".\") {\n        if (\n          getLevelTile(x - 1, y + 1) === \"_\" &&\n          getLevelTile(x - 1, y) === \"_\" &&\n          getLevelTile(x, y + 1) === \"_\"\n        )\n          return drawWallInnerRightCorner(ctx, x, y)\n        \n        if (\n          getLevelTile(x + 1, y + 1) === \"_\" &&\n          getLevelTile(x + 1, y) === \"_\" &&\n          getLevelTile(x, y + 1) === \"_\"\n        )\n          return drawWallInnerLeftCorner(ctx, x, y)\n        \n        if (\n          getLevelTile(x + 1, y - 1) === \"_\" &&\n          getLevelTile(x + 1, y) === \"_\" &&\n          getLevelTile(x, y - 1) === \"_\"\n        )\n          return drawWallInnerLeftTopCorner(ctx, x, y)\n        \n                if (\n          getLevelTile(x - 1, y - 1) === \"_\" &&\n          getLevelTile(x - 1, y) === \"_\" &&\n          getLevelTile(x, y - 1) === \"_\"\n        )\n          return drawWallInnerRightTopCorner(ctx, x, y)\n\n        if (getLevelTile(x, y + 1) === \"_\") return drawWallTopTile(ctx, x, y)\n        if (getLevelTile(x, y - 1) === \"_\") return drawWallBottomTile(ctx, x, y)\n        if (getLevelTile(x + 1, y) === \"_\") return drawWallLeftTile(ctx, x, y)\n        if (getLevelTile(x - 1, y) === \"_\") return drawWallRightTile(ctx, x, y)\n        if (getLevelTile(x - 1, y - 1) === \"_\")\n          return drawWallCornerBottomRightTile(ctx, x, y)\n        if (getLevelTile(x - 1, y + 1) === \"_\")\n          return drawWallCornerTopRightTile(ctx, x, y)\n        if (getLevelTile(x + 1, y - 1) === \"_\")\n          return drawWallCornerBottomLeftTile(ctx, x, y)\n        if (getLevelTile(x + 1, y + 1) === \"_\")\n          return drawWallCornerTopLeftTile(ctx, x, y)\n      }\n    })\n  )\n}\n\nfunction drawWallInnerRightCorner(ctx, x, y) {\n  drawSprite(ctx, \"floor_1\", x * TILE_SIZE, y * TILE_SIZE)\n  drawSprite(ctx, \"wall_side_front_left\", x * TILE_SIZE, y * TILE_SIZE)\n}\n\nfunction drawWallInnerLeftCorner(ctx, x, y) {\n  drawSprite(ctx, \"floor_1\", x * TILE_SIZE, y * TILE_SIZE)\n  drawSprite(ctx, \"wall_side_front_right\", x * TILE_SIZE, y * TILE_SIZE)\n}\n\nfunction drawWallInnerLeftTopCorner(ctx, x, y) {\n  drawSprite(ctx, \"floor_1\", x * TILE_SIZE, y * TILE_SIZE)\n  drawSprite(ctx, \"wall_side_mid_right\", x * TILE_SIZE, y * TILE_SIZE)\n  drawSprite(ctx, \"wall_side_top_right\", x * TILE_SIZE, (y - 1) * TILE_SIZE)\n}\n\nfunction drawWallInnerRightTopCorner(ctx, x, y) {\n  drawSprite(ctx, \"floor_1\", x * TILE_SIZE, y * TILE_SIZE)\n  drawSprite(ctx, \"wall_side_mid_left\", x * TILE_SIZE, y * TILE_SIZE)\n  drawSprite(ctx, \"wall_side_top_left\", x * TILE_SIZE, (y - 1) * TILE_SIZE)\n}\n\nfunction drawFloorTile(ctx, x, y, random) {\n  const brokenTilesFrequency = 0.1\n  const id = random < 1 - brokenTilesFrequency ? 1 : Math.ceil((random - 1 + brokenTilesFrequency) / brokenTilesFrequency * 8)\n  \n  drawSprite(ctx, \"floor_\" + id, x * TILE_SIZE, y * TILE_SIZE)\n}\n\nfunction drawWallTopTile(ctx, x, y) {\n  drawSprite(ctx, \"wall_top_mid\", x * TILE_SIZE, (y - 1) * TILE_SIZE)\n  drawSprite(ctx, \"wall_mid\", x * TILE_SIZE, y * TILE_SIZE)\n}\n\nfunction drawWallCornerTopLeftTile(ctx, x, y) {\n  drawSprite(ctx, \"wall_corner_left\", x * TILE_SIZE, y * TILE_SIZE)\n  drawSprite(ctx, \"wall_corner_top_left\", x * TILE_SIZE, (y - 1) * TILE_SIZE)\n}\n\nfunction drawWallCornerTopRightTile(ctx, x, y) {\n  drawSprite(ctx, \"wall_corner_right\", x * TILE_SIZE, y * TILE_SIZE)\n  drawSprite(ctx, \"wall_corner_top_right\", x * TILE_SIZE, (y - 1) * TILE_SIZE)\n}\n\nfunction drawWallCornerBottomRightTile(ctx, x, y) {\n  drawSprite(ctx, \"wall_corner_front_right\", x * TILE_SIZE, y * TILE_SIZE)\n  drawSprite(\n    ctx,\n    \"wall_corner_bottom_right\",\n    x * TILE_SIZE,\n    (y - 1) * TILE_SIZE\n  )\n}\n\nfunction drawWallCornerBottomLeftTile(ctx, x, y) {\n  drawSprite(ctx, \"wall_corner_front_left\", x * TILE_SIZE, y * TILE_SIZE)\n  drawSprite(ctx, \"wall_corner_bottom_left\", x * TILE_SIZE, (y - 1) * TILE_SIZE)\n}\n\nfunction drawWallLeftTile(ctx, x, y) {\n  drawSprite(ctx, \"floor_1\", x * TILE_SIZE, y * TILE_SIZE)\n  drawSprite(ctx, \"wall_side_mid_right\", x * TILE_SIZE, y * TILE_SIZE)\n}\n\nfunction drawWallRightTile(ctx, x, y) {\n  drawSprite(ctx, \"floor_1\", x * TILE_SIZE, y * TILE_SIZE)\n  drawSprite(ctx, \"wall_side_mid_left\", x * TILE_SIZE, y * TILE_SIZE)\n}\n\nfunction drawWallBottomTile(ctx, x, y) {\n  drawSprite(ctx, \"wall_mid\", x * TILE_SIZE, y * TILE_SIZE)\n  drawSprite(ctx, \"wall_top_mid\", x * TILE_SIZE, (y - 1) * TILE_SIZE)\n}\n\nconst levelMatrix = level.split(\"\\n\").map(line => line.split(\"\"))\n\nfunction getLevelTile(x, y) {\n  return levelMatrix[y] && levelMatrix[y][x]\n}\n","function drawUI(ctx) {\n  ctx.save()\n  ctx.fillStyle = \"#eee\"\n  ctx.fillText(\"Score: 0\", 0, 20);\n  ctx.restore()\n}\n\nexport default drawUI","import { animateSprite } from \"../lib/sprite\"\n\nexport default class Player {\n  constructor(x, y, speed = 20, flipped = false) {\n    this.x = x\n    this.y = y\n    this.speed = speed;\n    this.direction = [0,0]\n    this.flipped = flipped\n  }\n\n  draw(ctx) {\n    animateSprite(ctx, this.isMoving() ? \"wizzard_m_idle_anim\" : \"wizzard_m_run_anim\", this.x, this.y, this.flipped)\n  }\n\n  update(dt) {\n    const diagonalModifier = this.direction[0] !== 0 && this.direction[1] !== 0 ? 0.7 : 1\n    this.x = diagonalModifier * this.direction[0] * this.speed * dt\n    this.y = diagonalModifier * this.direction[1] * this.speed * dt\n  }\n  \n  setDirection(horizontal, vertical) {\n    this.direction = [horizontal, vertical]\n  }\n  \n  isMoving() {\n    return this.direction[0] === 0 && this.direction[1] === 0 \n  }\n}\n","import createGame from \"crtrdg-gameloop\"\nimport Arrows from 'crtrdg-arrows'\nimport drawLevel from \"./lib/level\"\nimport { animateSprite } from \"./lib/sprite\"\nimport drawUI from \"./lib/ui\"\nimport Player from \"./entities/Player\"\n\nconst game = createGame()\nconst arrows = new Arrows()\n\ngame.canvas.height = 512\ngame.canvas.width = 512\n\nconst player = new Player(140, 240)\n\nconst entities = [player]\n\ngame.on(\"draw\", function(ctx, dt) {\n  drawLevel(ctx)\n  drawEntities(ctx)\n  drawUI(ctx)\n})\n\ngame.on('update', function(dt){\n  let horizontal = 0\n  let vertical = 0\n  if (arrows.isDown('left')) {\n    horizontal -= 1\n  }\n  if (arrows.isDown('right')) {\n    horizontal += 1\n  }\n  if (arrows.isDown('up')) {\n    vertical -= 1\n  }\n  if (arrows.isDown('down')) {\n    vertical += 1\n  }\n  \n  player.move(horizontal, vertical)\n});\n\ngame.start()\n\nfunction drawEntities(ctx) {\n  entities.forEach(it => it.draw(ctx))\n}\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}